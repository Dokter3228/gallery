{"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/server.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.app = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _dotenv = require(\"dotenv\");\nvar _userRoutes = require(\"./routes/userRoutes\");\nvar _imageRoutes = require(\"./routes/imageRoutes\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n(0, _dotenv.config)();\nconst cors = require(\"cors\");\nconst corsOptions = {\n  origin: '*',\n  credentials: true,\n  //access-control-allow-credentials:true\n  optionSuccessStatus: 200\n};\nconst port = process.env.PORT;\nconst mongoUrl = process.env.MONGO_URL;\n_mongoose.default.connect(mongoUrl).then();\nconst database = _mongoose.default.connection;\ndatabase.on(\"error\", err => {\n  console.log(err);\n});\ndatabase.once(\"connected\", () => {\n  console.log(\"Database Connected\");\n});\nconst app = (0, _express.default)();\nexports.app = app;\napp.use(_express.default.json());\napp.use(_express.default.static('public'));\napp.use(cors(corsOptions));\napp.listen(port, () => {\n  console.log(`Server Started at ${port}`);\n});\napp.use(\"/users\", _userRoutes.userRouter);\napp.use(\"/images\", _imageRoutes.imageRouter);\napp.get('/api', (req, res) => {\n  res.json({\n    name: \"suck\"\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJjb3JzIiwicmVxdWlyZSIsImNvcnNPcHRpb25zIiwib3JpZ2luIiwiY3JlZGVudGlhbHMiLCJvcHRpb25TdWNjZXNzU3RhdHVzIiwicG9ydCIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwibW9uZ29VcmwiLCJNT05HT19VUkwiLCJtb25nb29zZSIsImNvbm5lY3QiLCJ0aGVuIiwiZGF0YWJhc2UiLCJjb25uZWN0aW9uIiwib24iLCJlcnIiLCJjb25zb2xlIiwibG9nIiwib25jZSIsImFwcCIsImV4cHJlc3MiLCJ1c2UiLCJqc29uIiwic3RhdGljIiwibGlzdGVuIiwidXNlclJvdXRlciIsImltYWdlUm91dGVyIiwiZ2V0IiwicmVxIiwicmVzIiwibmFtZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvbGludXgvRGVza3RvcC9nYWxsZXJ5L3NlcnZlci9zcmMvIiwic291cmNlcyI6WyJzZXJ2ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcblxuaW1wb3J0IHtjb25maWd9IGZyb20gXCJkb3RlbnZcIjtcbmNvbmZpZygpO1xuXG5pbXBvcnQge3VzZXJSb3V0ZXJ9IGZyb20gXCIuL3JvdXRlcy91c2VyUm91dGVzXCI7XG5pbXBvcnQge2ltYWdlUm91dGVyfSBmcm9tIFwiLi9yb3V0ZXMvaW1hZ2VSb3V0ZXNcIjtcblxuY29uc3QgY29ycz1yZXF1aXJlKFwiY29yc1wiKTtcbmNvbnN0IGNvcnNPcHRpb25zID17XG4gIG9yaWdpbjonKicsXG4gIGNyZWRlbnRpYWxzOnRydWUsICAgICAgICAgICAgLy9hY2Nlc3MtY29udHJvbC1hbGxvdy1jcmVkZW50aWFsczp0cnVlXG4gIG9wdGlvblN1Y2Nlc3NTdGF0dXM6MjAwLFxufVxuXG5cblxuY29uc3QgcG9ydCA9IHByb2Nlc3MuZW52LlBPUlQ7XG5jb25zdCBtb25nb1VybCA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSTDtcbm1vbmdvb3NlLmNvbm5lY3QobW9uZ29VcmwpLnRoZW4oKTtcbmNvbnN0IGRhdGFiYXNlID0gbW9uZ29vc2UuY29ubmVjdGlvbjtcblxuZGF0YWJhc2Uub24oXCJlcnJvclwiLCAoZXJyKSA9PiB7XG4gIGNvbnNvbGUubG9nKGVycik7XG59KTtcblxuZGF0YWJhc2Uub25jZShcImNvbm5lY3RlZFwiLCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwiRGF0YWJhc2UgQ29ubmVjdGVkXCIpO1xufSk7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKCdwdWJsaWMnKSk7XG5hcHAudXNlKGNvcnMoY29yc09wdGlvbnMpKVxuYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKGBTZXJ2ZXIgU3RhcnRlZCBhdCAke3BvcnR9YCk7XG59KTtcblxuYXBwLnVzZShcIi91c2Vyc1wiLCB1c2VyUm91dGVyKTtcbmFwcC51c2UoXCIvaW1hZ2VzXCIsIGltYWdlUm91dGVyKTtcblxuYXBwLmdldCgnL2FwaScsIChyZXEscmVzKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICBuYW1lOiBcInN1Y2tcIlxuICB9KVxufSlcblxuZXhwb3J0e2FwcH07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFBaUQ7QUFIakQsSUFBQUEsY0FBTSxHQUFFO0FBS1IsTUFBTUMsSUFBSSxHQUFDQyxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzFCLE1BQU1DLFdBQVcsR0FBRTtFQUNqQkMsTUFBTSxFQUFDLEdBQUc7RUFDVkMsV0FBVyxFQUFDLElBQUk7RUFBYTtFQUM3QkMsbUJBQW1CLEVBQUM7QUFDdEIsQ0FBQztBQUlELE1BQU1DLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLElBQUk7QUFDN0IsTUFBTUMsUUFBUSxHQUFHSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csU0FBUztBQUN0Q0MsaUJBQVEsQ0FBQ0MsT0FBTyxDQUFDSCxRQUFRLENBQUMsQ0FBQ0ksSUFBSSxFQUFFO0FBQ2pDLE1BQU1DLFFBQVEsR0FBR0gsaUJBQVEsQ0FBQ0ksVUFBVTtBQUVwQ0QsUUFBUSxDQUFDRSxFQUFFLENBQUMsT0FBTyxFQUFHQyxHQUFHLElBQUs7RUFDNUJDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixHQUFHLENBQUM7QUFDbEIsQ0FBQyxDQUFDO0FBRUZILFFBQVEsQ0FBQ00sSUFBSSxDQUFDLFdBQVcsRUFBRSxNQUFNO0VBQy9CRixPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQztBQUNuQyxDQUFDLENBQUM7QUFFRixNQUFNRSxHQUFHLEdBQUcsSUFBQUMsZ0JBQU8sR0FBRTtBQUFDO0FBRXRCRCxHQUFHLENBQUNFLEdBQUcsQ0FBQ0QsZ0JBQU8sQ0FBQ0UsSUFBSSxFQUFFLENBQUM7QUFDdkJILEdBQUcsQ0FBQ0UsR0FBRyxDQUFDRCxnQkFBTyxDQUFDRyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDakNKLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDeEIsSUFBSSxDQUFDRSxXQUFXLENBQUMsQ0FBQztBQUMxQm9CLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDckIsSUFBSSxFQUFFLE1BQU07RUFDckJhLE9BQU8sQ0FBQ0MsR0FBRyxDQUFFLHFCQUFvQmQsSUFBSyxFQUFDLENBQUM7QUFDMUMsQ0FBQyxDQUFDO0FBRUZnQixHQUFHLENBQUNFLEdBQUcsQ0FBQyxRQUFRLEVBQUVJLHNCQUFVLENBQUM7QUFDN0JOLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLFNBQVMsRUFBRUssd0JBQVcsQ0FBQztBQUUvQlAsR0FBRyxDQUFDUSxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUNDLEdBQUcsRUFBQ0MsR0FBRyxLQUFLO0VBQzNCQSxHQUFHLENBQUNQLElBQUksQ0FBQztJQUNQUSxJQUFJLEVBQUU7RUFDUixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMifQ==","map":{"version":3,"names":["config","cors","require","corsOptions","origin","credentials","optionSuccessStatus","port","process","env","PORT","mongoUrl","MONGO_URL","mongoose","connect","then","database","connection","on","err","console","log","once","app","express","use","json","static","listen","userRouter","imageRouter","get","req","res","name"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/","sources":["server.ts"],"sourcesContent":["import mongoose from \"mongoose\";\nimport express from \"express\";\n\nimport {config} from \"dotenv\";\nconfig();\n\nimport {userRouter} from \"./routes/userRoutes\";\nimport {imageRouter} from \"./routes/imageRoutes\";\n\nconst cors=require(\"cors\");\nconst corsOptions ={\n  origin:'*',\n  credentials:true,            //access-control-allow-credentials:true\n  optionSuccessStatus:200,\n}\n\n\n\nconst port = process.env.PORT;\nconst mongoUrl = process.env.MONGO_URL;\nmongoose.connect(mongoUrl).then();\nconst database = mongoose.connection;\n\ndatabase.on(\"error\", (err) => {\n  console.log(err);\n});\n\ndatabase.once(\"connected\", () => {\n  console.log(\"Database Connected\");\n});\n\nconst app = express();\n\napp.use(express.json());\napp.use(express.static('public'));\napp.use(cors(corsOptions))\napp.listen(port, () => {\n  console.log(`Server Started at ${port}`);\n});\n\napp.use(\"/users\", userRouter);\napp.use(\"/images\", imageRouter);\n\napp.get('/api', (req,res) => {\n  res.json({\n    name: \"suck\"\n  })\n})\n\nexport{app};\n"],"mappings":";;;;;;AAAA;AACA;AAEA;AAGA;AACA;AAAiD;AAHjD,IAAAA,cAAM,GAAE;AAKR,MAAMC,IAAI,GAACC,OAAO,CAAC,MAAM,CAAC;AAC1B,MAAMC,WAAW,GAAE;EACjBC,MAAM,EAAC,GAAG;EACVC,WAAW,EAAC,IAAI;EAAa;EAC7BC,mBAAmB,EAAC;AACtB,CAAC;AAID,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI;AAC7B,MAAMC,QAAQ,GAAGH,OAAO,CAACC,GAAG,CAACG,SAAS;AACtCC,iBAAQ,CAACC,OAAO,CAACH,QAAQ,CAAC,CAACI,IAAI,EAAE;AACjC,MAAMC,QAAQ,GAAGH,iBAAQ,CAACI,UAAU;AAEpCD,QAAQ,CAACE,EAAE,CAAC,OAAO,EAAGC,GAAG,IAAK;EAC5BC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;AAClB,CAAC,CAAC;AAEFH,QAAQ,CAACM,IAAI,CAAC,WAAW,EAAE,MAAM;EAC/BF,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;AACnC,CAAC,CAAC;AAEF,MAAME,GAAG,GAAG,IAAAC,gBAAO,GAAE;AAAC;AAEtBD,GAAG,CAACE,GAAG,CAACD,gBAAO,CAACE,IAAI,EAAE,CAAC;AACvBH,GAAG,CAACE,GAAG,CAACD,gBAAO,CAACG,MAAM,CAAC,QAAQ,CAAC,CAAC;AACjCJ,GAAG,CAACE,GAAG,CAACxB,IAAI,CAACE,WAAW,CAAC,CAAC;AAC1BoB,GAAG,CAACK,MAAM,CAACrB,IAAI,EAAE,MAAM;EACrBa,OAAO,CAACC,GAAG,CAAE,qBAAoBd,IAAK,EAAC,CAAC;AAC1C,CAAC,CAAC;AAEFgB,GAAG,CAACE,GAAG,CAAC,QAAQ,EAAEI,sBAAU,CAAC;AAC7BN,GAAG,CAACE,GAAG,CAAC,SAAS,EAAEK,wBAAW,CAAC;AAE/BP,GAAG,CAACQ,GAAG,CAAC,MAAM,EAAE,CAACC,GAAG,EAACC,GAAG,KAAK;EAC3BA,GAAG,CAACP,IAAI,CAAC;IACPQ,IAAI,EAAE;EACR,CAAC,CAAC;AACJ,CAAC,CAAC"}},"mtime":1676456140883},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/routes/userRoutes.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.userRouter = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _cookieParser = _interopRequireDefault(require(\"cookie-parser\"));\nvar _userController = _interopRequireDefault(require(\"../controllers/userController\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userRouter = _express.default.Router();\nexports.userRouter = userRouter;\nconst sessions = {};\nuserRouter.use((0, _cookieParser.default)(\"secret key\"));\nuserRouter.post(\"/newUser\", _userController.default.newUser);\nuserRouter.post(\"/login\", _userController.default.login);\nuserRouter.post(\"/logout\", _userController.default.logout);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsInNlc3Npb25zIiwidXNlIiwiY29va2llUGFyc2VyIiwicG9zdCIsInVzZXJDb250cm9sbGVyIiwibmV3VXNlciIsImxvZ2luIiwibG9nb3V0Il0sInNvdXJjZVJvb3QiOiIvaG9tZS9saW51eC9EZXNrdG9wL2dhbGxlcnkvc2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJ1c2VyUm91dGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQge3Y0IGFzIHV1aWR9IGZyb20gXCJ1dWlkXCI7XG5cbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSBcImNvb2tpZS1wYXJzZXJcIjtcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuXG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWxzL3VzZXJcIjtcbmltcG9ydCB1c2VyQ29udHJvbGxlciBmcm9tIFwiLi4vY29udHJvbGxlcnMvdXNlckNvbnRyb2xsZXJcIjtcbmNvbnN0IHVzZXJSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5jb25zdCBzZXNzaW9ucyA9IHt9O1xuXG5cbnVzZXJSb3V0ZXIudXNlKGNvb2tpZVBhcnNlcihcInNlY3JldCBrZXlcIikpO1xuXG51c2VyUm91dGVyLnBvc3QoXCIvbmV3VXNlclwiLCB1c2VyQ29udHJvbGxlci5uZXdVc2VyKTtcbnVzZXJSb3V0ZXIucG9zdChcIi9sb2dpblwiLCAgdXNlckNvbnRyb2xsZXIubG9naW4pO1xudXNlclJvdXRlci5wb3N0KFwiL2xvZ291dFwiLCB1c2VyQ29udHJvbGxlci5sb2dvdXQpO1xuXG5leHBvcnR7dXNlclJvdXRlcn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBR0E7QUFJQTtBQUEyRDtBQUMzRCxNQUFNQSxVQUFVLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUFDO0FBRXBDLE1BQU1DLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFHbkJILFVBQVUsQ0FBQ0ksR0FBRyxDQUFDLElBQUFDLHFCQUFZLEVBQUMsWUFBWSxDQUFDLENBQUM7QUFFMUNMLFVBQVUsQ0FBQ00sSUFBSSxDQUFDLFVBQVUsRUFBRUMsdUJBQWMsQ0FBQ0MsT0FBTyxDQUFDO0FBQ25EUixVQUFVLENBQUNNLElBQUksQ0FBQyxRQUFRLEVBQUdDLHVCQUFjLENBQUNFLEtBQUssQ0FBQztBQUNoRFQsVUFBVSxDQUFDTSxJQUFJLENBQUMsU0FBUyxFQUFFQyx1QkFBYyxDQUFDRyxNQUFNLENBQUMifQ==","map":{"version":3,"names":["userRouter","express","Router","sessions","use","cookieParser","post","userController","newUser","login","logout"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/routes/","sources":["userRoutes.ts"],"sourcesContent":["import express from \"express\";\nimport {v4 as uuid} from \"uuid\";\n\nimport cookieParser from \"cookie-parser\";\nimport jwt from \"jsonwebtoken\";\n\nimport User from \"../models/user\";\nimport userController from \"../controllers/userController\";\nconst userRouter = express.Router();\n\nconst sessions = {};\n\n\nuserRouter.use(cookieParser(\"secret key\"));\n\nuserRouter.post(\"/newUser\", userController.newUser);\nuserRouter.post(\"/login\",  userController.login);\nuserRouter.post(\"/logout\", userController.logout);\n\nexport{userRouter};\n"],"mappings":";;;;;;AAAA;AAGA;AAIA;AAA2D;AAC3D,MAAMA,UAAU,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAAC;AAEpC,MAAMC,QAAQ,GAAG,CAAC,CAAC;AAGnBH,UAAU,CAACI,GAAG,CAAC,IAAAC,qBAAY,EAAC,YAAY,CAAC,CAAC;AAE1CL,UAAU,CAACM,IAAI,CAAC,UAAU,EAAEC,uBAAc,CAACC,OAAO,CAAC;AACnDR,UAAU,CAACM,IAAI,CAAC,QAAQ,EAAGC,uBAAc,CAACE,KAAK,CAAC;AAChDT,UAAU,CAACM,IAAI,CAAC,SAAS,EAAEC,uBAAc,CAACG,MAAM,CAAC"}},"mtime":1675797744282},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/controllers/userController.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _user = _interopRequireDefault(require(\"../models/user\"));\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst doesUserExistCheck = async function (login, password) {\n  const doesUserExist = await _user.default.findOne({\n    $and: [{\n      login: login\n    }, {\n      password: password\n    }]\n  }, (err, res) => {\n    if (err) {\n      res.status(500).send(err);\n      return;\n    }\n    return true;\n  }).clone().catch(function (err) {\n    console.log(err);\n  });\n  return doesUserExist;\n};\nclass userController {\n  async newUser(req, res) {\n    const {\n      login,\n      password\n    } = req.body;\n    const doesUserExist = await doesUserExistCheck(login, password);\n    if (!doesUserExist) {\n      const user = new _user.default({\n        login: req.body.login,\n        password: req.body.password\n      });\n      try {\n        const userToSave = await user.save();\n        const token = _jsonwebtoken.default.sign({\n          login,\n          password\n        }, process.env.JWT_SECRET_KEY, {\n          expiresIn: \"15m\"\n        });\n        res.cookie(\"set-cookie\", token);\n        res.status(301).json(userToSave);\n      } catch (error) {\n        res.status(400).json({\n          message: error.message\n        });\n      }\n    } else {\n      res.status(301).json({\n        message: \"this user already exists\"\n      });\n    }\n  }\n  async login(req, res) {\n    const {\n      login,\n      password,\n      _id\n    } = req.body;\n    const doesUserExist = await doesUserExistCheck(login, password);\n    if (doesUserExist) {\n      try {\n        const token = _jsonwebtoken.default.sign({\n          login,\n          password\n        }, process.env.JWT_SECRET_KEY, {\n          expiresIn: \"15m\"\n        });\n        res.cookie(\"set-cookie\", token);\n        res.status(200).send({\n          login,\n          password\n        });\n      } catch (e) {\n        console.log(e);\n        res.status(400).json({\n          message: e.message\n        });\n      }\n    } else {\n      res.status(401).json({\n        message: \"you are not signed up\"\n      });\n    }\n  }\n  async logout(req, res) {\n    res.clearCookie('set-cookie');\n    res.status(200).json({\n      message: \"you logged out\"\n    });\n  }\n}\nvar _default = new userController();\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb2VzVXNlckV4aXN0Q2hlY2siLCJsb2dpbiIsInBhc3N3b3JkIiwiZG9lc1VzZXJFeGlzdCIsIlVzZXIiLCJmaW5kT25lIiwiJGFuZCIsImVyciIsInJlcyIsInN0YXR1cyIsInNlbmQiLCJjbG9uZSIsImNhdGNoIiwiY29uc29sZSIsImxvZyIsInVzZXJDb250cm9sbGVyIiwibmV3VXNlciIsInJlcSIsImJvZHkiLCJ1c2VyIiwidXNlclRvU2F2ZSIsInNhdmUiLCJ0b2tlbiIsImp3dCIsInNpZ24iLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVF9LRVkiLCJleHBpcmVzSW4iLCJjb29raWUiLCJqc29uIiwiZXJyb3IiLCJtZXNzYWdlIiwiX2lkIiwiZSIsImxvZ291dCIsImNsZWFyQ29va2llIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9saW51eC9EZXNrdG9wL2dhbGxlcnkvc2VydmVyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbInVzZXJDb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbHMvdXNlclwiO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5cblxuY29uc3QgZG9lc1VzZXJFeGlzdENoZWNrID0gYXN5bmMgZnVuY3Rpb24obG9naW4sIHBhc3N3b3JkKSB7XG4gICAgY29uc3QgZG9lc1VzZXJFeGlzdCA9IGF3YWl0IFVzZXIuZmluZE9uZShcbiAgICAgICAgeyAkYW5kOiBbeyBsb2dpbjogbG9naW4gfSwgeyBwYXNzd29yZDogcGFzc3dvcmQgfV0gfSxcbiAgICAgICAgKGVyciwgcmVzKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIClcbiAgICAgICAgLmNsb25lKClcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuICAgIHJldHVybiBkb2VzVXNlckV4aXN0XG59XG5cbmNsYXNzIHVzZXJDb250cm9sbGVyIHtcbiAgICBhc3luYyBuZXdVc2VyICAocmVxLHJlcykge1xuICAgICAgICBjb25zdCB7IGxvZ2luLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnN0IGRvZXNVc2VyRXhpc3QgPSBhd2FpdCBkb2VzVXNlckV4aXN0Q2hlY2sobG9naW4sIHBhc3N3b3JkKTtcbiAgICAgICAgaWYoIWRvZXNVc2VyRXhpc3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XG4gICAgICAgICAgICAgICAgbG9naW46IHJlcS5ib2R5LmxvZ2luLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiByZXEuYm9keS5wYXNzd29yZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyVG9TYXZlID0gYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9naW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVF9LRVksXG4gICAgICAgICAgICAgICAgICAgIHsgZXhwaXJlc0luOiBcIjE1bVwiIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJlcy5jb29raWUoXCJzZXQtY29va2llXCIsIHRva2VuKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDMwMSkuanNvbih1c2VyVG9TYXZlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe21lc3NhZ2U6IGVycm9yLm1lc3NhZ2V9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMzAxKS5qc29uKHttZXNzYWdlOiBcInRoaXMgdXNlciBhbHJlYWR5IGV4aXN0c1wifSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGxvZ2luKHJlcSxyZXMpIHtcbiAgICAgICAgY29uc3QgeyBsb2dpbiwgcGFzc3dvcmQsIF9pZCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnN0IGRvZXNVc2VyRXhpc3QgPSBhd2FpdCBkb2VzVXNlckV4aXN0Q2hlY2sobG9naW4sIHBhc3N3b3JkKTtcbiAgICAgICAgaWYgKGRvZXNVc2VyRXhpc3QpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9naW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVF9LRVksXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGV4cGlyZXNJbjogXCIxNW1cIiB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5jb29raWUoXCJzZXQtY29va2llXCIsIHRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9naW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe21lc3NhZ2U6IGUubWVzc2FnZX0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7bWVzc2FnZTogXCJ5b3UgYXJlIG5vdCBzaWduZWQgdXBcIn0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBsb2dvdXQgKHJlcSxyZXMpIHtcbiAgICAgICAgcmVzLmNsZWFyQ29va2llKCdzZXQtY29va2llJyk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwieW91IGxvZ2dlZCBvdXRcIlxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyB1c2VyQ29udHJvbGxlcigpOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUErQjtBQUcvQixNQUFNQSxrQkFBa0IsR0FBRyxnQkFBZUMsS0FBSyxFQUFFQyxRQUFRLEVBQUU7RUFDdkQsTUFBTUMsYUFBYSxHQUFHLE1BQU1DLGFBQUksQ0FBQ0MsT0FBTyxDQUNwQztJQUFFQyxJQUFJLEVBQUUsQ0FBQztNQUFFTCxLQUFLLEVBQUVBO0lBQU0sQ0FBQyxFQUFFO01BQUVDLFFBQVEsRUFBRUE7SUFBUyxDQUFDO0VBQUUsQ0FBQyxFQUNwRCxDQUFDSyxHQUFHLEVBQUVDLEdBQUcsS0FBSztJQUNWLElBQUlELEdBQUcsRUFBRTtNQUNMQyxHQUFHLENBQUNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSCxHQUFHLENBQUM7TUFDekI7SUFDSjtJQUNBLE9BQU8sSUFBSTtFQUNmLENBQUMsQ0FDSixDQUNJSSxLQUFLLEVBQUUsQ0FDUEMs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","map":{"version":3,"names":["doesUserExistCheck","login","password","doesUserExist","User","findOne","$and","err","res","status","send","clone","catch","console","log","userController","newUser","req","body","user","userToSave","save","token","jwt","sign","process","env","JWT_SECRET_KEY","expiresIn","cookie","json","error","message","_id","e","logout","clearCookie"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/controllers/","sources":["userController.ts"],"sourcesContent":["import User from \"../models/user\";\nimport jwt from \"jsonwebtoken\";\n\n\nconst doesUserExistCheck = async function(login, password) {\n    const doesUserExist = await User.findOne(\n        { $and: [{ login: login }, { password: password }] },\n        (err, res) => {\n            if (err) {\n                res.status(500).send(err);\n                return;\n            }\n            return true;\n        }\n    )\n        .clone()\n        .catch(function (err) {\n            console.log(err);\n        });\n    return doesUserExist\n}\n\nclass userController {\n    async newUser  (req,res) {\n        const { login, password } = req.body;\n        const doesUserExist = await doesUserExistCheck(login, password);\n        if(!doesUserExist) {\n            const user = new User({\n                login: req.body.login,\n                password: req.body.password,\n            });\n            try {\n                const userToSave = await user.save();\n                const token = jwt.sign(\n                    {\n                        login,\n                        password,\n                    },\n                    process.env.JWT_SECRET_KEY,\n                    { expiresIn: \"15m\" }\n                );\n                res.cookie(\"set-cookie\", token);\n                res.status(301).json(userToSave);\n            } catch (error) {\n                res.status(400).json({message: error.message});\n            }\n        } else {\n            res.status(301).json({message: \"this user already exists\"})\n        }\n    }\n\n    async login(req,res) {\n        const { login, password, _id } = req.body;\n        const doesUserExist = await doesUserExistCheck(login, password);\n        if (doesUserExist) {\n            try {\n                    const token = jwt.sign(\n                        {\n                            login,\n                            password,\n                        },\n                        process.env.JWT_SECRET_KEY,\n                        { expiresIn: \"15m\" }\n                    );\n                    res.cookie(\"set-cookie\", token);\n                    res.status(200).send({\n                        login,\n                        password,\n                    })\n            } catch(e) {\n                console.log(e)\n                res.status(400).json({message: e.message})\n            }\n        } else {\n            res.status(401).json({message: \"you are not signed up\"})\n        }\n    }\n\n    async logout (req,res) {\n        res.clearCookie('set-cookie');\n        res.status(200).json({\n            message: \"you logged out\"\n        });\n    }\n}\n\nexport default new userController();"],"mappings":"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"}},"mtime":1676712383372},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/models/user.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userSchema = new _mongoose.default.Schema({\n  login: {\n    required: true,\n    type: String\n  },\n  password: {\n    required: true,\n    type: String\n  }\n});\nvar _default = _mongoose.default.model(\"User\", userSchema);\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJsb2dpbiIsInJlcXVpcmVkIiwidHlwZSIsIlN0cmluZyIsInBhc3N3b3JkIiwibW9kZWwiXSwic291cmNlUm9vdCI6Ii9ob21lL2xpbnV4L0Rlc2t0b3AvZ2FsbGVyeS9zZXJ2ZXIvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbInVzZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIGxvZ2luOiB7XG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBwYXNzd29yZDoge1xuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbChcIlVzZXJcIiwgdXNlclNjaGVtYSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQWdDO0FBRWhDLE1BQU1BLFVBQVUsR0FBRyxJQUFJQyxpQkFBUSxDQUFDQyxNQUFNLENBQUM7RUFDckNDLEtBQUssRUFBRTtJQUNMQyxRQUFRLEVBQUUsSUFBSTtJQUNkQyxJQUFJLEVBQUVDO0VBQ1IsQ0FBQztFQUNEQyxRQUFRLEVBQUU7SUFDUkgsUUFBUSxFQUFFLElBQUk7SUFDZEMsSUFBSSxFQUFFQztFQUNSO0FBQ0YsQ0FBQyxDQUFDO0FBQUMsZUFFWUwsaUJBQVEsQ0FBQ08sS0FBSyxDQUFDLE1BQU0sRUFBRVIsVUFBVSxDQUFDO0FBQUEifQ==","map":{"version":3,"names":["userSchema","mongoose","Schema","login","required","type","String","password","model"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/models/","sources":["user.ts"],"sourcesContent":["import mongoose from \"mongoose\";\n\nconst userSchema = new mongoose.Schema({\n  login: {\n    required: true,\n    type: String,\n  },\n  password: {\n    required: true,\n    type: String,\n  },\n});\n\nexport default mongoose.model(\"User\", userSchema);\n"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,UAAU,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACrCC,KAAK,EAAE;IACLC,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAEC;EACR,CAAC;EACDC,QAAQ,EAAE;IACRH,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAEC;EACR;AACF,CAAC,CAAC;AAAC,eAEYL,iBAAQ,CAACO,KAAK,CAAC,MAAM,EAAER,UAAU,CAAC;AAAA"}},"mtime":1675504296837},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/routes/imageRoutes.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.imageRouter = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _imageController = _interopRequireDefault(require(\"../controllers/imageController\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst fileUpload = require('express-fileupload');\nconst checkAuth = require('../../middleware/auth');\nconst imageRouter = _express.default.Router();\n\n// imageRouter.use(checkAuth)\nexports.imageRouter = imageRouter;\nimageRouter.use(fileUpload({\n  createParentPath: true\n}));\nimageRouter.post('/image/:id', _imageController.default.setImage);\nimageRouter.get('/image/:id', _imageController.default.getImageMeta);\nimageRouter.get('/allImages/', _imageController.default.getAllImages);\nimageRouter.put('/image/:id', _imageController.default.changeImageMeta);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmaWxlVXBsb2FkIiwicmVxdWlyZSIsImNoZWNrQXV0aCIsImltYWdlUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsInVzZSIsImNyZWF0ZVBhcmVudFBhdGgiLCJwb3N0IiwiaW1hZ2VDb250cm9sbGVyIiwic2V0SW1hZ2UiLCJnZXQiLCJnZXRJbWFnZU1ldGEiLCJnZXRBbGxJbWFnZXMiLCJwdXQiLCJjaGFuZ2VJbWFnZU1ldGEiXSwic291cmNlUm9vdCI6Ii9ob21lL2xpbnV4L0Rlc2t0b3AvZ2FsbGVyeS9zZXJ2ZXIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzIjpbImltYWdlUm91dGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuY29uc3QgZmlsZVVwbG9hZCA9IHJlcXVpcmUoJ2V4cHJlc3MtZmlsZXVwbG9hZCcpO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgaW1hZ2VDb250cm9sbGVyIGZyb20gXCIuLi9jb250cm9sbGVycy9pbWFnZUNvbnRyb2xsZXJcIjtcblxuY29uc3QgY2hlY2tBdXRoID0gcmVxdWlyZSgnLi4vLi4vbWlkZGxld2FyZS9hdXRoJyk7XG5cbmNvbnN0IGltYWdlUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuLy8gaW1hZ2VSb3V0ZXIudXNlKGNoZWNrQXV0aClcblxuaW1hZ2VSb3V0ZXIudXNlKGZpbGVVcGxvYWQoe1xuICAgIGNyZWF0ZVBhcmVudFBhdGg6IHRydWVcbn0pKTtcblxuXG5pbWFnZVJvdXRlci5wb3N0KCcvaW1hZ2UvOmlkJywgaW1hZ2VDb250cm9sbGVyLnNldEltYWdlKTtcbmltYWdlUm91dGVyLmdldCgnL2ltYWdlLzppZCcsIGltYWdlQ29udHJvbGxlci5nZXRJbWFnZU1ldGEpXG5pbWFnZVJvdXRlci5nZXQoJy9hbGxJbWFnZXMvJywgaW1hZ2VDb250cm9sbGVyLmdldEFsbEltYWdlcylcbmltYWdlUm91dGVyLnB1dCgnL2ltYWdlLzppZCcsIGltYWdlQ29udHJvbGxlci5jaGFuZ2VJbWFnZU1ldGEpXG5cbmV4cG9ydHtpbWFnZVJvdXRlcn07Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUdBO0FBQTZEO0FBRjdELE1BQU1BLFVBQVUsR0FBR0MsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBSWhELE1BQU1DLFNBQVMsR0FBR0QsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBRWxELE1BQU1FLFdBQVcsR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFOztBQUVwQztBQUFBO0FBRUFGLFdBQVcsQ0FBQ0csR0FBRyxDQUFDTixVQUFVLENBQUM7RUFDdkJPLGdCQUFnQixFQUFFO0FBQ3RCLENBQUMsQ0FBQyxDQUFDO0FBR0hKLFdBQVcsQ0FBQ0ssSUFBSSxDQUFDLFlBQVksRUFBRUMsd0JBQWUsQ0FBQ0MsUUFBUSxDQUFDO0FBQ3hEUCxXQUFXLENBQUNRLEdBQUcsQ0FBQyxZQUFZLEVBQUVGLHdCQUFlLENBQUNHLFlBQVksQ0FBQztBQUMzRFQsV0FBVyxDQUFDUSxHQUFHLENBQUMsYUFBYSxFQUFFRix3QkFBZSxDQUFDSSxZQUFZLENBQUM7QUFDNURWLFdBQVcsQ0FBQ1csR0FBRyxDQUFDLFlBQVksRUFBRUwsd0JBQWUsQ0FBQ00sZUFBZSxDQUFDIn0=","map":{"version":3,"names":["fileUpload","require","checkAuth","imageRouter","express","Router","use","createParentPath","post","imageController","setImage","get","getImageMeta","getAllImages","put","changeImageMeta"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/routes/","sources":["imageRoutes.ts"],"sourcesContent":["import express from 'express';\nconst fileUpload = require('express-fileupload');\nimport { v4 as uuidv4 } from 'uuid';\nimport imageController from \"../controllers/imageController\";\n\nconst checkAuth = require('../../middleware/auth');\n\nconst imageRouter = express.Router();\n\n// imageRouter.use(checkAuth)\n\nimageRouter.use(fileUpload({\n    createParentPath: true\n}));\n\n\nimageRouter.post('/image/:id', imageController.setImage);\nimageRouter.get('/image/:id', imageController.getImageMeta)\nimageRouter.get('/allImages/', imageController.getAllImages)\nimageRouter.put('/image/:id', imageController.changeImageMeta)\n\nexport{imageRouter};"],"mappings":";;;;;;AAAA;AAGA;AAA6D;AAF7D,MAAMA,UAAU,GAAGC,OAAO,CAAC,oBAAoB,CAAC;AAIhD,MAAMC,SAAS,GAAGD,OAAO,CAAC,uBAAuB,CAAC;AAElD,MAAME,WAAW,GAAGC,gBAAO,CAACC,MAAM,EAAE;;AAEpC;AAAA;AAEAF,WAAW,CAACG,GAAG,CAACN,UAAU,CAAC;EACvBO,gBAAgB,EAAE;AACtB,CAAC,CAAC,CAAC;AAGHJ,WAAW,CAACK,IAAI,CAAC,YAAY,EAAEC,wBAAe,CAACC,QAAQ,CAAC;AACxDP,WAAW,CAACQ,GAAG,CAAC,YAAY,EAAEF,wBAAe,CAACG,YAAY,CAAC;AAC3DT,WAAW,CAACQ,GAAG,CAAC,aAAa,EAAEF,wBAAe,CAACI,YAAY,CAAC;AAC5DV,WAAW,CAACW,GAAG,CAAC,YAAY,EAAEL,wBAAe,CAACM,eAAe,CAAC"}},"mtime":1676716984608},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/controllers/imageController.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _image = _interopRequireDefault(require(\"../models/image\"));\nvar _uuid = require(\"uuid\");\nvar _path = _interopRequireDefault(require(\"path\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nclass imageController {\n  async setImage(req, res) {\n    try {\n      // const token = req.headers?.cookie.split('set-cookie=').join('');\n      // const {login = \"somebody\"} = jwt.verify(token, process.env.JWT_SECRET_KEY);\n      const login = req.body.login;\n      const comment = req.body.comment;\n      const uuid = (0, _uuid.v4)();\n      let image;\n      let uploadPath;\n      console.log(req.files);\n      if (!req.files || Object.keys(req.files).length === 0) {\n        return res.status(400).send('No files were uploaded.');\n      }\n      image = req.files.image;\n      const fileExtension = image.name.split('.')[1];\n      uploadPath = _path.default.resolve(__dirname, '..', '..', \"public/images\") + \"/\" + uuid + \".\" + fileExtension;\n      const date = new Date().toLocaleDateString();\n      // Use the mv() method to place the file somewhere on your server\n      const imageDb = new _image.default({\n        author: login,\n        uuid: uuid,\n        date: date,\n        comment: comment\n      });\n      const imageToSave = await imageDb.save();\n      image.mv(uploadPath, function (err) {\n        if (err) return res.status(500).send(err);\n        res.status(301).send(imageToSave);\n      });\n    } catch (e) {\n      if (e.name === 'TokenExpiredError') {\n        res.status(400).send(\"Your jwt expired, login again\");\n      } else {\n        res.status(400).send(e);\n      }\n    }\n  }\n  async getImageMeta(req, res) {\n    const uuid = req.params.id;\n    const image = await _image.default.findOne({\n      uuid: uuid\n    });\n    res.status(200).json(image);\n  }\n  async changeImageMeta(req, res) {\n    const uuid = req.params.id;\n    const {\n      author,\n      comment\n    } = req.body;\n    const image = await _image.default.findOne({\n      uuid: uuid\n    });\n    image.author = author;\n    image.comment = comment;\n    await image.save();\n    res.json(image);\n  }\n  async getAllImages(req, res) {\n    const uuidsArray = [];\n    const images = await _image.default.find();\n    images.forEach(img => {\n      uuidsArray.push(img.uuid);\n    });\n    res.send(uuidsArray);\n  }\n}\nvar _default = new imageController();\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbWFnZUNvbnRyb2xsZXIiLCJzZXRJbWFnZSIsInJlcSIsInJlcyIsImxvZ2luIiwiYm9keSIsImNvbW1lbnQiLCJ1dWlkIiwidXVpZHY0IiwiaW1hZ2UiLCJ1cGxvYWRQYXRoIiwiY29uc29sZSIsImxvZyIsImZpbGVzIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsInN0YXR1cyIsInNlbmQiLCJmaWxlRXh0ZW5zaW9uIiwibmFtZSIsInNwbGl0IiwicGF0aCIsInJlc29sdmUiLCJfX2Rpcm5hbWUiLCJkYXRlIiwiRGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImltYWdlRGIiLCJJbWFnZSIsImF1dGhvciIsImltYWdlVG9TYXZlIiwic2F2ZSIsIm12IiwiZXJyIiwiZSIsImdldEltYWdlTWV0YSIsInBhcmFtcyIsImlkIiwiZmluZE9uZSIsImpzb24iLCJjaGFuZ2VJbWFnZU1ldGEiLCJnZXRBbGxJbWFnZXMiLCJ1dWlkc0FycmF5IiwiaW1hZ2VzIiwiZmluZCIsImZvckVhY2giLCJpbWciLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9saW51eC9EZXNrdG9wL2dhbGxlcnkvc2VydmVyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImltYWdlQ29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSW1hZ2UgZnJvbSBcIi4uL21vZGVscy9pbWFnZVwiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5cbmNsYXNzIGltYWdlQ29udHJvbGxlciB7XG4gICAgYXN5bmMgc2V0SW1hZ2UgKHJlcSxyZXMgKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXJzPy5jb29raWUuc3BsaXQoJ3NldC1jb29raWU9Jykuam9pbignJyk7XG4gICAgICAgICAgICAvLyBjb25zdCB7bG9naW4gPSBcInNvbWVib2R5XCJ9ID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVF9LRVkpO1xuICAgICAgICAgICAgY29uc3QgbG9naW4gPSByZXEuYm9keS5sb2dpblxuICAgICAgICAgICAgY29uc3QgY29tbWVudCA9IHJlcS5ib2R5LmNvbW1lbnQ7XG4gICAgICAgICAgICBjb25zdCB1dWlkID0gdXVpZHY0KCk7XG4gICAgICAgICAgICBsZXQgaW1hZ2U7XG4gICAgICAgICAgICBsZXQgdXBsb2FkUGF0aDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcS5maWxlcylcbiAgICAgICAgICAgIGlmICghcmVxLmZpbGVzIHx8IE9iamVjdC5rZXlzKHJlcS5maWxlcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdObyBmaWxlcyB3ZXJlIHVwbG9hZGVkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW1hZ2UgPSByZXEuZmlsZXMuaW1hZ2U7XG4gICAgICAgICAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gaW1hZ2UubmFtZS5zcGxpdCgnLicpWzFdXG4gICAgICAgICAgICB1cGxvYWRQYXRoID0gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJy4uJywgJy4uJywgXCJwdWJsaWMvaW1hZ2VzXCIgKSArIFwiL1wiICsgdXVpZCArIFwiLlwiKyAgZmlsZUV4dGVuc2lvbjtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICAgICAgICAgICAgLy8gVXNlIHRoZSBtdigpIG1ldGhvZCB0byBwbGFjZSB0aGUgZmlsZSBzb21ld2hlcmUgb24geW91ciBzZXJ2ZXJcbiAgICAgICAgICAgIGNvbnN0IGltYWdlRGIgPSBuZXcgSW1hZ2Uoe1xuICAgICAgICAgICAgICAgIGF1dGhvcjogbG9naW4sXG4gICAgICAgICAgICAgICAgdXVpZDogdXVpZCxcbiAgICAgICAgICAgICAgICBkYXRlOiBkYXRlLFxuICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGNvbW1lbnRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zdCBpbWFnZVRvU2F2ZSA9IGF3YWl0IGltYWdlRGIuc2F2ZSgpO1xuICAgICAgICAgICAgaW1hZ2UubXYodXBsb2FkUGF0aCwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZChlcnIpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMzAxKS5zZW5kKGltYWdlVG9TYXZlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmKGUubmFtZSA9PT0gJ1Rva2VuRXhwaXJlZEVycm9yJykge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKFwiWW91ciBqd3QgZXhwaXJlZCwgbG9naW4gYWdhaW5cIilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoZSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0SW1hZ2VNZXRhIChyZXEscmVzKSB7XG4gICAgICAgIGNvbnN0IHV1aWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IEltYWdlLmZpbmRPbmUoXG4gICAgICAgICAgICB7IHV1aWQ6IHV1aWQgfVxuICAgICAgICApXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGltYWdlKVxuICAgIH1cblxuICAgIGFzeW5jIGNoYW5nZUltYWdlTWV0YShyZXEscmVzKSB7XG4gICAgICAgIGNvbnN0IHV1aWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgICBjb25zdCB7YXV0aG9yLCBjb21tZW50fSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IEltYWdlLmZpbmRPbmUoXG4gICAgICAgICAgICB7IHV1aWQ6IHV1aWQgfVxuICAgICAgICApXG4gICAgICAgIGltYWdlLmF1dGhvciA9IGF1dGhvcjtcbiAgICAgICAgaW1hZ2UuY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgICAgIGF3YWl0IGltYWdlLnNhdmUoKVxuICAgICAgICByZXMuanNvbihpbWFnZSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxsSW1hZ2VzKHJlcSxyZXMpIHtcbiAgICAgICAgY29uc3QgdXVpZHNBcnJheSA9IFtdXG4gICAgICAgIGNvbnN0IGltYWdlcyA9IGF3YWl0IEltYWdlLmZpbmQoKTtcbiAgICAgICAgaW1hZ2VzLmZvckVhY2goaW1nID0+IHtcbiAgICAgICAgICAgIHV1aWRzQXJyYXkucHVzaChpbWcudXVpZClcbiAgICAgICAgfSlcbiAgICAgICAgcmVzLnNlbmQodXVpZHNBcnJheSlcbiAgICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgbmV3IGltYWdlQ29udHJvbGxlcigpOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQXdCO0FBR3hCLE1BQU1BLGVBQWUsQ0FBQztFQUNsQixNQUFNQyxRQUFRLENBQUVDLEdBQUcsRUFBQ0MsR0FBRyxFQUFHO0lBQ3RCLElBQUk7TUFDQTtNQUNBO01BQ0EsTUFBTUMsS0FBSyxHQUFHRixHQUFHLENBQUNHLElBQUksQ0FBQ0QsS0FBSztNQUM1QixNQUFNRSxPQUFPLEdBQUdKLEdBQUcsQ0FBQ0csSUFBSSxDQUFDQyxPQUFPO01BQ2hDLE1BQU1DLElBQUksR0FBRyxJQUFBQyxRQUFNLEdBQUU7TUFDckIsSUFBSUMsS0FBSztNQUNULElBQUlDLFVBQVU7TUFDZEMsT0FBTyxDQUFDQyxHQUFHLENBQUNWLEdBQUcsQ0FBQ1csS0FBSyxDQUFDO01BQ3RCLElBQUksQ0FBQ1gsR0FBRyxDQUFDVyxLQUFLLElBQUlDLE1B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","map":{"version":3,"names":["imageController","setImage","req","res","login","body","comment","uuid","uuidv4","image","uploadPath","console","log","files","Object","keys","length","status","send","fileExtension","name","split","path","resolve","__dirname","date","Date","toLocaleDateString","imageDb","Image","author","imageToSave","save","mv","err","e","getImageMeta","params","id","findOne","json","changeImageMeta","getAllImages","uuidsArray","images","find","forEach","img","push"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/controllers/","sources":["imageController.ts"],"sourcesContent":["import Image from \"../models/image\";\nimport { v4 as uuidv4 } from 'uuid';\nimport path from \"path\";\nimport jwt from \"jsonwebtoken\";\n\nclass imageController {\n    async setImage (req,res ) {\n        try {\n            // const token = req.headers?.cookie.split('set-cookie=').join('');\n            // const {login = \"somebody\"} = jwt.verify(token, process.env.JWT_SECRET_KEY);\n            const login = req.body.login\n            const comment = req.body.comment;\n            const uuid = uuidv4();\n            let image;\n            let uploadPath;\n            console.log(req.files)\n            if (!req.files || Object.keys(req.files).length === 0) {\n                return res.status(400).send('No files were uploaded.');\n            }\n            image = req.files.image;\n            const fileExtension = image.name.split('.')[1]\n            uploadPath = path.resolve(__dirname, '..', '..', \"public/images\" ) + \"/\" + uuid + \".\"+  fileExtension;\n            const date = new Date().toLocaleDateString();\n            // Use the mv() method to place the file somewhere on your server\n            const imageDb = new Image({\n                author: login,\n                uuid: uuid,\n                date: date,\n                comment: comment\n            })\n            const imageToSave = await imageDb.save();\n            image.mv(uploadPath, function (err) {\n                if (err)\n                    return res.status(500).send(err);\n                res.status(301).send(imageToSave);\n            })\n        } catch (e) {\n            if(e.name === 'TokenExpiredError') {\n                res.status(400).send(\"Your jwt expired, login again\")\n            } else {\n                res.status(400).send(e)\n            }\n\n        }\n    }\n\n    async getImageMeta (req,res) {\n        const uuid = req.params.id;\n        const image = await Image.findOne(\n            { uuid: uuid }\n        )\n        res.status(200).json(image)\n    }\n\n    async changeImageMeta(req,res) {\n        const uuid = req.params.id;\n        const {author, comment} = req.body;\n        const image = await Image.findOne(\n            { uuid: uuid }\n        )\n        image.author = author;\n        image.comment = comment;\n        await image.save()\n        res.json(image);\n    }\n\n    async getAllImages(req,res) {\n        const uuidsArray = []\n        const images = await Image.find();\n        images.forEach(img => {\n            uuidsArray.push(img.uuid)\n        })\n        res.send(uuidsArray)\n    }\n}\n\n\nexport default new imageController();"],"mappings":"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"}},"mtime":1676727498273},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/models/image.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst imageSchema = new _mongoose.default.Schema({\n  author: {\n    required: true,\n    type: String\n  },\n  uuid: {\n    required: true,\n    type: String\n  },\n  date: {\n    require: true,\n    type: String\n  },\n  comment: {\n    type: String\n  }\n});\nvar _default = _mongoose.default.model(\"Image\", imageSchema);\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbWFnZVNjaGVtYSIsIm1vbmdvb3NlIiwiU2NoZW1hIiwiYXV0aG9yIiwicmVxdWlyZWQiLCJ0eXBlIiwiU3RyaW5nIiwidXVpZCIsImRhdGUiLCJyZXF1aXJlIiwiY29tbWVudCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9saW51eC9EZXNrdG9wL2dhbGxlcnkvc2VydmVyL3NyYy9tb2RlbHMvIiwic291cmNlcyI6WyJpbWFnZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmNvbnN0IGltYWdlU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gICAgYXV0aG9yOiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgfSxcbiAgICB1dWlkOiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgfSxcbiAgICBkYXRlOiB7XG4gICAgICAgIHJlcXVpcmU6IHRydWUsXG4gICAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0sXG4gICAgY29tbWVudDoge1xuICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWwoXCJJbWFnZVwiLCBpbWFnZVNjaGVtYSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQWdDO0FBRWhDLE1BQU1BLFdBQVcsR0FBRyxJQUFJQyxpQkFBUSxDQUFDQyxNQUFNLENBQUM7RUFDcENDLE1BQU0sRUFBRTtJQUNKQyxRQUFRLEVBQUUsSUFBSTtJQUNkQyxJQUFJLEVBQUVDO0VBQ1YsQ0FBQztFQUNEQyxJQUFJLEVBQUU7SUFDRkgsUUFBUSxFQUFFLElBQUk7SUFDZEMsSUFBSSxFQUFFQztFQUNWLENBQUM7RUFDREUsSUFBSSxFQUFFO0lBQ0ZDLE9BQU8sRUFBRSxJQUFJO0lBQ2JKLElBQUksRUFBRUM7RUFDVixDQUFDO0VBQ0RJLE9BQU8sRUFBRTtJQUNMTCxJQUFJLEVBQUVDO0VBQ1Y7QUFDSixDQUFDLENBQUM7QUFBQyxlQUVZTCxpQkFBUSxDQUFDVSxLQUFLLENBQUMsT0FBTyxFQUFFWCxXQUFXLENBQUM7QUFBQSJ9","map":{"version":3,"names":["imageSchema","mongoose","Schema","author","required","type","String","uuid","date","require","comment","model"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/models/","sources":["image.ts"],"sourcesContent":["import mongoose from \"mongoose\";\n\nconst imageSchema = new mongoose.Schema({\n    author: {\n        required: true,\n        type: String,\n    },\n    uuid: {\n        required: true,\n        type: String,\n    },\n    date: {\n        require: true,\n        type: String\n    },\n    comment: {\n        type: String\n    }\n});\n\nexport default mongoose.model(\"Image\", imageSchema);\n"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,WAAW,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACpCC,MAAM,EAAE;IACJC,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAEC;EACV,CAAC;EACDC,IAAI,EAAE;IACFH,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAEC;EACV,CAAC;EACDE,IAAI,EAAE;IACFC,OAAO,EAAE,IAAI;IACbJ,IAAI,EAAEC;EACV,CAAC;EACDI,OAAO,EAAE;IACLL,IAAI,EAAEC;EACV;AACJ,CAAC,CAAC;AAAC,eAEYL,iBAAQ,CAACU,KAAK,CAAC,OAAO,EAAEX,WAAW,CAAC;AAAA"}},"mtime":1675797744282},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/routes/userRoutes.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.userRouter = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _cookieParser = _interopRequireDefault(require(\"cookie-parser\"));\nvar _userController = _interopRequireDefault(require(\"../controllers/userController\"));\nvar _auth = _interopRequireDefault(require(\"../../middleware/auth\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userRouter = _express.default.Router();\nexports.userRouter = userRouter;\nconst sessions = {};\nuserRouter.use((0, _cookieParser.default)(\"secret key\"));\nuserRouter.post(\"/newUser\", _userController.default.newUser);\nuserRouter.post(\"/login\", _userController.default.login);\nuserRouter.post(\"/logout\", _userController.default.logout);\nuserRouter.post(\"/getUser\", _auth.default);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsInNlc3Npb25zIiwidXNlIiwiY29va2llUGFyc2VyIiwicG9zdCIsInVzZXJDb250cm9sbGVyIiwibmV3VXNlciIsImxvZ2luIiwibG9nb3V0IiwiY2hlY2tBdXRoIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9saW51eC9EZXNrdG9wL2dhbGxlcnkvc2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJ1c2VyUm91dGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQge3Y0IGFzIHV1aWR9IGZyb20gXCJ1dWlkXCI7XG5cbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSBcImNvb2tpZS1wYXJzZXJcIjtcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuXG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWxzL3VzZXJcIjtcbmltcG9ydCB1c2VyQ29udHJvbGxlciBmcm9tIFwiLi4vY29udHJvbGxlcnMvdXNlckNvbnRyb2xsZXJcIjtcbmNvbnN0IHVzZXJSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuaW1wb3J0IGNoZWNrQXV0aCBmcm9tICcuLi8uLi9taWRkbGV3YXJlL2F1dGgnXG5jb25zdCBzZXNzaW9ucyA9IHt9O1xuXG5cbnVzZXJSb3V0ZXIudXNlKGNvb2tpZVBhcnNlcihcInNlY3JldCBrZXlcIikpO1xuXG51c2VyUm91dGVyLnBvc3QoXCIvbmV3VXNlclwiLCB1c2VyQ29udHJvbGxlci5uZXdVc2VyKTtcbnVzZXJSb3V0ZXIucG9zdChcIi9sb2dpblwiLCAgdXNlckNvbnRyb2xsZXIubG9naW4pO1xudXNlclJvdXRlci5wb3N0KFwiL2xvZ291dFwiLCB1c2VyQ29udHJvbGxlci5sb2dvdXQpO1xudXNlclJvdXRlci5wb3N0KFwiL2dldFVzZXJcIiwgY2hlY2tBdXRoKVxuZXhwb3J0e3VzZXJSb3V0ZXJ9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUdBO0FBSUE7QUFFQTtBQUE2QztBQUQ3QyxNQUFNQSxVQUFVLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUFDO0FBRXBDLE1BQU1DLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFHbkJILFVBQVUsQ0FBQ0ksR0FBRyxDQUFDLElBQUFDLHFCQUFZLEVBQUMsWUFBWSxDQUFDLENBQUM7QUFFMUNMLFVBQVUsQ0FBQ00sSUFBSSxDQUFDLFVBQVUsRUFBRUMsdUJBQWMsQ0FBQ0MsT0FBTyxDQUFDO0FBQ25EUixVQUFVLENBQUNNLElBQUksQ0FBQyxRQUFRLEVBQUdDLHVCQUFjLENBQUNFLEtBQUssQ0FBQztBQUNoRFQsVUFBVSxDQUFDTSxJQUFJLENBQUMsU0FBUyxFQUFFQyx1QkFBYyxDQUFDRyxNQUFNLENBQUM7QUFDakRWLFVBQVUsQ0FBQ00sSUFBSSxDQUFDLFVBQVUsRUFBRUssYUFBUyxDQUFDIn0=","map":{"version":3,"names":["userRouter","express","Router","sessions","use","cookieParser","post","userController","newUser","login","logout","checkAuth"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/routes/","sources":["userRoutes.ts"],"sourcesContent":["import express from \"express\";\nimport {v4 as uuid} from \"uuid\";\n\nimport cookieParser from \"cookie-parser\";\nimport jwt from \"jsonwebtoken\";\n\nimport User from \"../models/user\";\nimport userController from \"../controllers/userController\";\nconst userRouter = express.Router();\nimport checkAuth from '../../middleware/auth'\nconst sessions = {};\n\n\nuserRouter.use(cookieParser(\"secret key\"));\n\nuserRouter.post(\"/newUser\", userController.newUser);\nuserRouter.post(\"/login\",  userController.login);\nuserRouter.post(\"/logout\", userController.logout);\nuserRouter.post(\"/getUser\", checkAuth)\nexport{userRouter};\n"],"mappings":";;;;;;AAAA;AAGA;AAIA;AAEA;AAA6C;AAD7C,MAAMA,UAAU,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAAC;AAEpC,MAAMC,QAAQ,GAAG,CAAC,CAAC;AAGnBH,UAAU,CAACI,GAAG,CAAC,IAAAC,qBAAY,EAAC,YAAY,CAAC,CAAC;AAE1CL,UAAU,CAACM,IAAI,CAAC,UAAU,EAAEC,uBAAc,CAACC,OAAO,CAAC;AACnDR,UAAU,CAACM,IAAI,CAAC,QAAQ,EAAGC,uBAAc,CAACE,KAAK,CAAC;AAChDT,UAAU,CAACM,IAAI,CAAC,SAAS,EAAEC,uBAAc,CAACG,MAAM,CAAC;AACjDV,UAAU,CAACM,IAAI,CAAC,UAAU,EAAEK,aAAS,CAAC"}},"mtime":1676727672461},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/controllers/userController.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _user = _interopRequireDefault(require(\"../models/user\"));\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst doesUserExistCheck = async function (login, password) {\n  const doesUserExist = await _user.default.findOne({\n    $and: [{\n      login: login\n    }, {\n      password: password\n    }]\n  }, (err, res) => {\n    if (err) {\n      res.status(500).send(err);\n      return;\n    }\n    return true;\n  }).clone().catch(function (err) {\n    console.log(err);\n  });\n  return doesUserExist;\n};\nclass userController {\n  async newUser(req, res) {\n    const {\n      login,\n      password\n    } = req.body;\n    const doesUserExist = await doesUserExistCheck(login, password);\n    if (!doesUserExist) {\n      const user = new _user.default({\n        login: req.body.login,\n        password: req.body.password\n      });\n      try {\n        const userToSave = await user.save();\n        const token = _jsonwebtoken.default.sign({\n          login,\n          password\n        }, process.env.JWT_SECRET_KEY, {\n          expiresIn: \"15m\"\n        });\n        res.cookie(\"set-cookie\", token);\n        res.status(301).json(userToSave);\n      } catch (error) {\n        res.status(400).json({\n          message: error.message\n        });\n      }\n    } else {\n      res.status(301).json({\n        message: \"this user already exists\"\n      });\n    }\n  }\n  async login(req, res) {\n    const {\n      login,\n      password,\n      _id\n    } = req.body;\n    const doesUserExist = await doesUserExistCheck(login, password);\n    if (doesUserExist) {\n      try {\n        const token = _jsonwebtoken.default.sign({\n          login,\n          password\n        }, process.env.JWT_SECRET_KEY, {\n          expiresIn: \"15m\"\n        });\n        res.cookie(\"set-cookie\", token);\n        res.status(200).send({\n          login,\n          password\n        });\n      } catch (e) {\n        console.log(e);\n        res.status(400).json({\n          message: e.message\n        });\n      }\n    } else {\n      res.status(401).json({\n        message: \"you are not signed up\"\n      });\n    }\n  }\n  async logout(req, res) {\n    res.clearCookie('set-cookie');\n    res.status(200).json({\n      message: \"you logged out\"\n    });\n  }\n}\nvar _default = new userController();\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb2VzVXNlckV4aXN0Q2hlY2siLCJsb2dpbiIsInBhc3N3b3JkIiwiZG9lc1VzZXJFeGlzdCIsIlVzZXIiLCJmaW5kT25lIiwiJGFuZCIsImVyciIsInJlcyIsInN0YXR1cyIsInNlbmQiLCJjbG9uZSIsImNhdGNoIiwiY29uc29sZSIsImxvZyIsInVzZXJDb250cm9sbGVyIiwibmV3VXNlciIsInJlcSIsImJvZHkiLCJ1c2VyIiwidXNlclRvU2F2ZSIsInNhdmUiLCJ0b2tlbiIsImp3dCIsInNpZ24iLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVF9LRVkiLCJleHBpcmVzSW4iLCJjb29raWUiLCJqc29uIiwiZXJyb3IiLCJtZXNzYWdlIiwiX2lkIiwiZSIsImxvZ291dCIsImNsZWFyQ29va2llIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9saW51eC9EZXNrdG9wL2dhbGxlcnkvc2VydmVyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbInVzZXJDb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbHMvdXNlclwiO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5cblxuY29uc3QgZG9lc1VzZXJFeGlzdENoZWNrID0gYXN5bmMgZnVuY3Rpb24obG9naW4sIHBhc3N3b3JkKSB7XG4gICAgY29uc3QgZG9lc1VzZXJFeGlzdCA9IGF3YWl0IFVzZXIuZmluZE9uZShcbiAgICAgICAgeyAkYW5kOiBbeyBsb2dpbjogbG9naW4gfSwgeyBwYXNzd29yZDogcGFzc3dvcmQgfV0gfSxcbiAgICAgICAgKGVyciwgcmVzKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIClcbiAgICAgICAgLmNsb25lKClcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuICAgIHJldHVybiBkb2VzVXNlckV4aXN0XG59XG5cbmNsYXNzIHVzZXJDb250cm9sbGVyIHtcbiAgICBhc3luYyBuZXdVc2VyICAocmVxLHJlcykge1xuICAgICAgICBjb25zdCB7IGxvZ2luLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnN0IGRvZXNVc2VyRXhpc3QgPSBhd2FpdCBkb2VzVXNlckV4aXN0Q2hlY2sobG9naW4sIHBhc3N3b3JkKTtcbiAgICAgICAgaWYoIWRvZXNVc2VyRXhpc3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XG4gICAgICAgICAgICAgICAgbG9naW46IHJlcS5ib2R5LmxvZ2luLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiByZXEuYm9keS5wYXNzd29yZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyVG9TYXZlID0gYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9naW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVF9LRVksXG4gICAgICAgICAgICAgICAgICAgIHsgZXhwaXJlc0luOiBcIjE1bVwiIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJlcy5jb29raWUoXCJzZXQtY29va2llXCIsIHRva2VuKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDMwMSkuanNvbih1c2VyVG9TYXZlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe21lc3NhZ2U6IGVycm9yLm1lc3NhZ2V9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMzAxKS5qc29uKHttZXNzYWdlOiBcInRoaXMgdXNlciBhbHJlYWR5IGV4aXN0c1wifSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGxvZ2luKHJlcSxyZXMpIHtcbiAgICAgICAgY29uc3QgeyBsb2dpbiwgcGFzc3dvcmQsIF9pZCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnN0IGRvZXNVc2VyRXhpc3QgPSBhd2FpdCBkb2VzVXNlckV4aXN0Q2hlY2sobG9naW4sIHBhc3N3b3JkKTtcbiAgICAgICAgaWYgKGRvZXNVc2VyRXhpc3QpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9naW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVF9LRVksXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGV4cGlyZXNJbjogXCIxNW1cIiB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5jb29raWUoXCJzZXQtY29va2llXCIsIHRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9naW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe21lc3NhZ2U6IGUubWVzc2FnZX0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7bWVzc2FnZTogXCJ5b3UgYXJlIG5vdCBzaWduZWQgdXBcIn0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBsb2dvdXQgKHJlcSxyZXMpIHtcbiAgICAgICAgcmVzLmNsZWFyQ29va2llKCdzZXQtY29va2llJyk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwieW91IGxvZ2dlZCBvdXRcIlxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyB1c2VyQ29udHJvbGxlcigpOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUErQjtBQUcvQixNQUFNQSxrQkFBa0IsR0FBRyxnQkFBZUMsS0FBSyxFQUFFQyxRQUFRLEVBQUU7RUFDdkQsTUFBTUMsYUFBYSxHQUFHLE1BQU1DLGFBQUksQ0FBQ0MsT0FBTyxDQUNwQztJQUFFQyxJQUFJLEVBQUUsQ0FBQztNQUFFTCxLQUFLLEVBQUVBO0lBQU0sQ0FBQyxFQUFFO01BQUVDLFFBQVEsRUFBRUE7SUFBUyxDQUFDO0VBQUUsQ0FBQyxFQUNwRCxDQUFDSyxHQUFHLEVBQUVDLEdBQUcsS0FBSztJQUNWLElBQUlELEdBQUcsRUFBRTtNQUNMQyxHQUFHLENBQUNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSCxHQUFHLENBQUM7TUFDekI7SUFDSjtJQUNBLE9BQU8sSUFBSTtFQUNmLENBQUMsQ0FDSixDQUNJSSxLQUFLLEVBQUUsQ0FDUEMs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","map":{"version":3,"names":["doesUserExistCheck","login","password","doesUserExist","User","findOne","$and","err","res","status","send","clone","catch","console","log","userController","newUser","req","body","user","userToSave","save","token","jwt","sign","process","env","JWT_SECRET_KEY","expiresIn","cookie","json","error","message","_id","e","logout","clearCookie"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/controllers/","sources":["userController.ts"],"sourcesContent":["import User from \"../models/user\";\nimport jwt from \"jsonwebtoken\";\n\n\nconst doesUserExistCheck = async function(login, password) {\n    const doesUserExist = await User.findOne(\n        { $and: [{ login: login }, { password: password }] },\n        (err, res) => {\n            if (err) {\n                res.status(500).send(err);\n                return;\n            }\n            return true;\n        }\n    )\n        .clone()\n        .catch(function (err) {\n            console.log(err);\n        });\n    return doesUserExist\n}\n\nclass userController {\n    async newUser  (req,res) {\n        const { login, password } = req.body;\n        const doesUserExist = await doesUserExistCheck(login, password);\n        if(!doesUserExist) {\n            const user = new User({\n                login: req.body.login,\n                password: req.body.password,\n            });\n            try {\n                const userToSave = await user.save();\n                const token = jwt.sign(\n                    {\n                        login,\n                        password,\n                    },\n                    process.env.JWT_SECRET_KEY,\n                    { expiresIn: \"15m\" }\n                );\n                res.cookie(\"set-cookie\", token);\n                res.status(301).json(userToSave);\n            } catch (error) {\n                res.status(400).json({message: error.message});\n            }\n        } else {\n            res.status(301).json({message: \"this user already exists\"})\n        }\n    }\n\n    async login(req,res) {\n        const { login, password, _id } = req.body;\n        const doesUserExist = await doesUserExistCheck(login, password);\n        if (doesUserExist) {\n            try {\n                    const token = jwt.sign(\n                        {\n                            login,\n                            password,\n                        },\n                        process.env.JWT_SECRET_KEY,\n                        { expiresIn: \"15m\" }\n                    );\n                    res.cookie(\"set-cookie\", token);\n                    res.status(200).send({\n                        login,\n                        password,\n                    })\n            } catch(e) {\n                console.log(e)\n                res.status(400).json({message: e.message})\n            }\n        } else {\n            res.status(401).json({message: \"you are not signed up\"})\n        }\n    }\n\n    async logout (req,res) {\n        res.clearCookie('set-cookie');\n        res.status(200).json({\n            message: \"you logged out\"\n        });\n    }\n}\n\nexport default new userController();"],"mappings":"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"}},"mtime":1676712383372},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/models/user.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userSchema = new _mongoose.default.Schema({\n  login: {\n    required: true,\n    type: String\n  },\n  password: {\n    required: true,\n    type: String\n  }\n});\nvar _default = _mongoose.default.model(\"User\", userSchema);\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJsb2dpbiIsInJlcXVpcmVkIiwidHlwZSIsIlN0cmluZyIsInBhc3N3b3JkIiwibW9kZWwiXSwic291cmNlUm9vdCI6Ii9ob21lL2xpbnV4L0Rlc2t0b3AvZ2FsbGVyeS9zZXJ2ZXIvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbInVzZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIGxvZ2luOiB7XG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBwYXNzd29yZDoge1xuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbChcIlVzZXJcIiwgdXNlclNjaGVtYSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQWdDO0FBRWhDLE1BQU1BLFVBQVUsR0FBRyxJQUFJQyxpQkFBUSxDQUFDQyxNQUFNLENBQUM7RUFDckNDLEtBQUssRUFBRTtJQUNMQyxRQUFRLEVBQUUsSUFBSTtJQUNkQyxJQUFJLEVBQUVDO0VBQ1IsQ0FBQztFQUNEQyxRQUFRLEVBQUU7SUFDUkgsUUFBUSxFQUFFLElBQUk7SUFDZEMsSUFBSSxFQUFFQztFQUNSO0FBQ0YsQ0FBQyxDQUFDO0FBQUMsZUFFWUwsaUJBQVEsQ0FBQ08sS0FBSyxDQUFDLE1BQU0sRUFBRVIsVUFBVSxDQUFDO0FBQUEifQ==","map":{"version":3,"names":["userSchema","mongoose","Schema","login","required","type","String","password","model"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/models/","sources":["user.ts"],"sourcesContent":["import mongoose from \"mongoose\";\n\nconst userSchema = new mongoose.Schema({\n  login: {\n    required: true,\n    type: String,\n  },\n  password: {\n    required: true,\n    type: String,\n  },\n});\n\nexport default mongoose.model(\"User\", userSchema);\n"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,UAAU,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACrCC,KAAK,EAAE;IACLC,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAEC;EACR,CAAC;EACDC,QAAQ,EAAE;IACRH,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAEC;EACR;AACF,CAAC,CAAC;AAAC,eAEYL,iBAAQ,CAACO,KAAK,CAAC,MAAM,EAAER,UAAU,CAAC;AAAA"}},"mtime":1675504296837},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/routes/imageRoutes.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.imageRouter = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _imageController = _interopRequireDefault(require(\"../controllers/imageController\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst fileUpload = require('express-fileupload');\nconst checkAuth = require('../../middleware/auth');\nconst imageRouter = _express.default.Router();\n\n// imageRouter.use(checkAuth)\nexports.imageRouter = imageRouter;\nimageRouter.use(fileUpload({\n  createParentPath: true\n}));\nimageRouter.post('/image/:id', _imageController.default.setImage);\nimageRouter.get('/image/:id', _imageController.default.getImageMeta);\nimageRouter.get('/allImages/', _imageController.default.getAllImages);\nimageRouter.put('/image/:id', _imageController.default.changeImageMeta);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmaWxlVXBsb2FkIiwicmVxdWlyZSIsImNoZWNrQXV0aCIsImltYWdlUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsInVzZSIsImNyZWF0ZVBhcmVudFBhdGgiLCJwb3N0IiwiaW1hZ2VDb250cm9sbGVyIiwic2V0SW1hZ2UiLCJnZXQiLCJnZXRJbWFnZU1ldGEiLCJnZXRBbGxJbWFnZXMiLCJwdXQiLCJjaGFuZ2VJbWFnZU1ldGEiXSwic291cmNlUm9vdCI6Ii9ob21lL2xpbnV4L0Rlc2t0b3AvZ2FsbGVyeS9zZXJ2ZXIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzIjpbImltYWdlUm91dGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuY29uc3QgZmlsZVVwbG9hZCA9IHJlcXVpcmUoJ2V4cHJlc3MtZmlsZXVwbG9hZCcpO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgaW1hZ2VDb250cm9sbGVyIGZyb20gXCIuLi9jb250cm9sbGVycy9pbWFnZUNvbnRyb2xsZXJcIjtcblxuY29uc3QgY2hlY2tBdXRoID0gcmVxdWlyZSgnLi4vLi4vbWlkZGxld2FyZS9hdXRoJyk7XG5cbmNvbnN0IGltYWdlUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuLy8gaW1hZ2VSb3V0ZXIudXNlKGNoZWNrQXV0aClcblxuaW1hZ2VSb3V0ZXIudXNlKGZpbGVVcGxvYWQoe1xuICAgIGNyZWF0ZVBhcmVudFBhdGg6IHRydWVcbn0pKTtcblxuXG5pbWFnZVJvdXRlci5wb3N0KCcvaW1hZ2UvOmlkJywgaW1hZ2VDb250cm9sbGVyLnNldEltYWdlKTtcbmltYWdlUm91dGVyLmdldCgnL2ltYWdlLzppZCcsIGltYWdlQ29udHJvbGxlci5nZXRJbWFnZU1ldGEpXG5pbWFnZVJvdXRlci5nZXQoJy9hbGxJbWFnZXMvJywgaW1hZ2VDb250cm9sbGVyLmdldEFsbEltYWdlcylcbmltYWdlUm91dGVyLnB1dCgnL2ltYWdlLzppZCcsIGltYWdlQ29udHJvbGxlci5jaGFuZ2VJbWFnZU1ldGEpXG5cbmV4cG9ydHtpbWFnZVJvdXRlcn07Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUdBO0FBQTZEO0FBRjdELE1BQU1BLFVBQVUsR0FBR0MsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBSWhELE1BQU1DLFNBQVMsR0FBR0QsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBRWxELE1BQU1FLFdBQVcsR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFOztBQUVwQztBQUFBO0FBRUFGLFdBQVcsQ0FBQ0csR0FBRyxDQUFDTixVQUFVLENBQUM7RUFDdkJPLGdCQUFnQixFQUFFO0FBQ3RCLENBQUMsQ0FBQyxDQUFDO0FBR0hKLFdBQVcsQ0FBQ0ssSUFBSSxDQUFDLFlBQVksRUFBRUMsd0JBQWUsQ0FBQ0MsUUFBUSxDQUFDO0FBQ3hEUCxXQUFXLENBQUNRLEdBQUcsQ0FBQyxZQUFZLEVBQUVGLHdCQUFlLENBQUNHLFlBQVksQ0FBQztBQUMzRFQsV0FBVyxDQUFDUSxHQUFHLENBQUMsYUFBYSxFQUFFRix3QkFBZSxDQUFDSSxZQUFZLENBQUM7QUFDNURWLFdBQVcsQ0FBQ1csR0FBRyxDQUFDLFlBQVksRUFBRUwsd0JBQWUsQ0FBQ00sZUFBZSxDQUFDIn0=","map":{"version":3,"names":["fileUpload","require","checkAuth","imageRouter","express","Router","use","createParentPath","post","imageController","setImage","get","getImageMeta","getAllImages","put","changeImageMeta"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/routes/","sources":["imageRoutes.ts"],"sourcesContent":["import express from 'express';\nconst fileUpload = require('express-fileupload');\nimport { v4 as uuidv4 } from 'uuid';\nimport imageController from \"../controllers/imageController\";\n\nconst checkAuth = require('../../middleware/auth');\n\nconst imageRouter = express.Router();\n\n// imageRouter.use(checkAuth)\n\nimageRouter.use(fileUpload({\n    createParentPath: true\n}));\n\n\nimageRouter.post('/image/:id', imageController.setImage);\nimageRouter.get('/image/:id', imageController.getImageMeta)\nimageRouter.get('/allImages/', imageController.getAllImages)\nimageRouter.put('/image/:id', imageController.changeImageMeta)\n\nexport{imageRouter};"],"mappings":";;;;;;AAAA;AAGA;AAA6D;AAF7D,MAAMA,UAAU,GAAGC,OAAO,CAAC,oBAAoB,CAAC;AAIhD,MAAMC,SAAS,GAAGD,OAAO,CAAC,uBAAuB,CAAC;AAElD,MAAME,WAAW,GAAGC,gBAAO,CAACC,MAAM,EAAE;;AAEpC;AAAA;AAEAF,WAAW,CAACG,GAAG,CAACN,UAAU,CAAC;EACvBO,gBAAgB,EAAE;AACtB,CAAC,CAAC,CAAC;AAGHJ,WAAW,CAACK,IAAI,CAAC,YAAY,EAAEC,wBAAe,CAACC,QAAQ,CAAC;AACxDP,WAAW,CAACQ,GAAG,CAAC,YAAY,EAAEF,wBAAe,CAACG,YAAY,CAAC;AAC3DT,WAAW,CAACQ,GAAG,CAAC,aAAa,EAAEF,wBAAe,CAACI,YAAY,CAAC;AAC5DV,WAAW,CAACW,GAAG,CAAC,YAAY,EAAEL,wBAAe,CAACM,eAAe,CAAC"}},"mtime":1676716984608},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/controllers/imageController.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _image = _interopRequireDefault(require(\"../models/image\"));\nvar _uuid = require(\"uuid\");\nvar _path = _interopRequireDefault(require(\"path\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nclass imageController {\n  async setImage(req, res) {\n    try {\n      // const token = req.headers?.cookie.split('set-cookie=').join('');\n      // const {login = \"somebody\"} = jwt.verify(token, process.env.JWT_SECRET_KEY);\n      const login = req.body.login;\n      const comment = req.body.comment;\n      const uuid = (0, _uuid.v4)();\n      let image;\n      let uploadPath;\n      if (!req.files || Object.keys(req.files).length === 0) {\n        return res.status(400).send('No files were uploaded.');\n      }\n      image = req.files.image;\n      const fileExtension = image.name.split('.')[1];\n      uploadPath = _path.default.resolve(__dirname, '..', '..', \"public/images\") + \"/\" + uuid + \".\" + fileExtension;\n      const date = new Date().toLocaleDateString();\n      // Use the mv() method to place the file somewhere on your server\n      const imageDb = new _image.default({\n        author: login,\n        uuid: uuid,\n        date: date,\n        comment: comment\n      });\n      const imageToSave = await imageDb.save();\n      image.mv(uploadPath, function (err) {\n        if (err) return res.status(500).send(err);\n        res.status(200).send(imageToSave);\n      });\n    } catch (e) {\n      if (e.name === 'TokenExpiredError') {\n        res.status(400).send(\"Your jwt expired, login again\");\n      } else {\n        res.status(400).send(e);\n      }\n    }\n  }\n  async getImageMeta(req, res) {\n    const uuid = req.params.id;\n    const image = await _image.default.findOne({\n      uuid: uuid\n    });\n    res.status(200).json(image);\n  }\n  async changeImageMeta(req, res) {\n    const uuid = req.params.id;\n    const {\n      author,\n      comment\n    } = req.body;\n    const image = await _image.default.findOne({\n      uuid: uuid\n    });\n    image.author = author;\n    image.comment = comment;\n    await image.save();\n    res.json(image);\n  }\n  async getAllImages(req, res) {\n    const uuidsArray = [];\n    const images = await _image.default.find();\n    console.log(images);\n    images.forEach(img => {\n      uuidsArray.push(img.uuid);\n    });\n    res.send(uuidsArray);\n  }\n}\nvar _default = new imageController();\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbWFnZUNvbnRyb2xsZXIiLCJzZXRJbWFnZSIsInJlcSIsInJlcyIsImxvZ2luIiwiYm9keSIsImNvbW1lbnQiLCJ1dWlkIiwidXVpZHY0IiwiaW1hZ2UiLCJ1cGxvYWRQYXRoIiwiZmlsZXMiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwic3RhdHVzIiwic2VuZCIsImZpbGVFeHRlbnNpb24iLCJuYW1lIiwic3BsaXQiLCJwYXRoIiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsImRhdGUiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiaW1hZ2VEYiIsIkltYWdlIiwiYXV0aG9yIiwiaW1hZ2VUb1NhdmUiLCJzYXZlIiwibXYiLCJlcnIiLCJlIiwiZ2V0SW1hZ2VNZXRhIiwicGFyYW1zIiwiaWQiLCJmaW5kT25lIiwianNvbiIsImNoYW5nZUltYWdlTWV0YSIsImdldEFsbEltYWdlcyIsInV1aWRzQXJyYXkiLCJpbWFnZXMiLCJmaW5kIiwiY29uc29sZSIsImxvZyIsImZvckVhY2giLCJpbWciLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9saW51eC9EZXNrdG9wL2dhbGxlcnkvc2VydmVyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImltYWdlQ29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSW1hZ2UgZnJvbSBcIi4uL21vZGVscy9pbWFnZVwiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5cbmNsYXNzIGltYWdlQ29udHJvbGxlciB7XG4gICAgYXN5bmMgc2V0SW1hZ2UgKHJlcSxyZXMgKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXJzPy5jb29raWUuc3BsaXQoJ3NldC1jb29raWU9Jykuam9pbignJyk7XG4gICAgICAgICAgICAvLyBjb25zdCB7bG9naW4gPSBcInNvbWVib2R5XCJ9ID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVF9LRVkpO1xuICAgICAgICAgICAgY29uc3QgbG9naW4gPSByZXEuYm9keS5sb2dpblxuICAgICAgICAgICAgY29uc3QgY29tbWVudCA9IHJlcS5ib2R5LmNvbW1lbnQ7XG4gICAgICAgICAgICBjb25zdCB1dWlkID0gdXVpZHY0KCk7XG4gICAgICAgICAgICBsZXQgaW1hZ2U7XG4gICAgICAgICAgICBsZXQgdXBsb2FkUGF0aDtcbiAgICAgICAgICAgIGlmICghcmVxLmZpbGVzIHx8IE9iamVjdC5rZXlzKHJlcS5maWxlcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdObyBmaWxlcyB3ZXJlIHVwbG9hZGVkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW1hZ2UgPSByZXEuZmlsZXMuaW1hZ2U7XG4gICAgICAgICAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gaW1hZ2UubmFtZS5zcGxpdCgnLicpWzFdXG4gICAgICAgICAgICB1cGxvYWRQYXRoID0gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJy4uJywgJy4uJywgXCJwdWJsaWMvaW1hZ2VzXCIgKSArIFwiL1wiICsgdXVpZCArIFwiLlwiKyAgZmlsZUV4dGVuc2lvbjtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICAgICAgICAgICAgLy8gVXNlIHRoZSBtdigpIG1ldGhvZCB0byBwbGFjZSB0aGUgZmlsZSBzb21ld2hlcmUgb24geW91ciBzZXJ2ZXJcbiAgICAgICAgICAgIGNvbnN0IGltYWdlRGIgPSBuZXcgSW1hZ2Uoe1xuICAgICAgICAgICAgICAgIGF1dGhvcjogbG9naW4sXG4gICAgICAgICAgICAgICAgdXVpZDogdXVpZCxcbiAgICAgICAgICAgICAgICBkYXRlOiBkYXRlLFxuICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGNvbW1lbnRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zdCBpbWFnZVRvU2F2ZSA9IGF3YWl0IGltYWdlRGIuc2F2ZSgpO1xuICAgICAgICAgICAgaW1hZ2UubXYodXBsb2FkUGF0aCwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZChlcnIpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGltYWdlVG9TYXZlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmKGUubmFtZSA9PT0gJ1Rva2VuRXhwaXJlZEVycm9yJykge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKFwiWW91ciBqd3QgZXhwaXJlZCwgbG9naW4gYWdhaW5cIilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoZSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0SW1hZ2VNZXRhIChyZXEscmVzKSB7XG4gICAgICAgIGNvbnN0IHV1aWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IEltYWdlLmZpbmRPbmUoXG4gICAgICAgICAgICB7IHV1aWQ6IHV1aWQgfVxuICAgICAgICApXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGltYWdlKVxuICAgIH1cblxuICAgIGFzeW5jIGNoYW5nZUltYWdlTWV0YShyZXEscmVzKSB7XG4gICAgICAgIGNvbnN0IHV1aWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgICBjb25zdCB7YXV0aG9yLCBjb21tZW50fSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IEltYWdlLmZpbmRPbmUoXG4gICAgICAgICAgICB7IHV1aWQ6IHV1aWQgfVxuICAgICAgICApXG4gICAgICAgIGltYWdlLmF1dGhvciA9IGF1dGhvcjtcbiAgICAgICAgaW1hZ2UuY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgICAgIGF3YWl0IGltYWdlLnNhdmUoKVxuICAgICAgICByZXMuanNvbihpbWFnZSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxsSW1hZ2VzKHJlcSxyZXMpIHtcbiAgICAgICAgY29uc3QgdXVpZHNBcnJheSA9IFtdXG4gICAgICAgIGNvbnN0IGltYWdlcyA9IGF3YWl0IEltYWdlLmZpbmQoKTtcbiAgICAgICAgY29uc29sZS5sb2coaW1hZ2VzKVxuICAgICAgICBpbWFnZXMuZm9yRWFjaChpbWcgPT4ge1xuICAgICAgICAgICAgdXVpZHNBcnJheS5wdXNoKGltZy51dWlkKVxuICAgICAgICB9KVxuICAgICAgICByZXMuc2VuZCh1dWlkc0FycmF5KVxuICAgIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBuZXcgaW1hZ2VDb250cm9sbGVyKCk7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFBd0I7QUFHeEIsTUFBTUEsZUFBZSxDQUFDO0VBQ2xCLE1BQU1DLFFBQVEsQ0FBRUMsR0FBRyxFQUFDQyxHQUFHLEVBQUc7SUFDdEIsSUFBSTtNQUNBO01BQ0E7TUFDQSxNQUFNQyxLQUFLLEdBQUdGLEdBQUcsQ0FBQ0csSUFBSSxDQUFDRCxLQUFLO01BQzVCLE1BQU1FLE9BQU8sR0FBR0osR0FBRyxDQUFDRyxJQUFJLENBQUNDLE9BQU87TUFDaEMsTUFBTUMsSUFBSSxHQUFHLElBQUFDLFFBQU0sR0FBRTtNQUNyQixJQUFJQyxLQUFLO01BQ1QsSUFBSUMsVUFBVTtNQUNkLElBQUksQ0FBQ1IsR0FBRyxDQUFDUyxLQUFLLElBQUlDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDWCxHQUFHLENBQUNTLEtBQUssQ0FBQyxDQUFDRyxNQUFNLEtBQUss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","map":{"version":3,"names":["imageController","setImage","req","res","login","body","comment","uuid","uuidv4","image","uploadPath","files","Object","keys","length","status","send","fileExtension","name","split","path","resolve","__dirname","date","Date","toLocaleDateString","imageDb","Image","author","imageToSave","save","mv","err","e","getImageMeta","params","id","findOne","json","changeImageMeta","getAllImages","uuidsArray","images","find","console","log","forEach","img","push"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/controllers/","sources":["imageController.ts"],"sourcesContent":["import Image from \"../models/image\";\nimport { v4 as uuidv4 } from 'uuid';\nimport path from \"path\";\nimport jwt from \"jsonwebtoken\";\n\nclass imageController {\n    async setImage (req,res ) {\n        try {\n            // const token = req.headers?.cookie.split('set-cookie=').join('');\n            // const {login = \"somebody\"} = jwt.verify(token, process.env.JWT_SECRET_KEY);\n            const login = req.body.login\n            const comment = req.body.comment;\n            const uuid = uuidv4();\n            let image;\n            let uploadPath;\n            if (!req.files || Object.keys(req.files).length === 0) {\n                return res.status(400).send('No files were uploaded.');\n            }\n            image = req.files.image;\n            const fileExtension = image.name.split('.')[1]\n            uploadPath = path.resolve(__dirname, '..', '..', \"public/images\" ) + \"/\" + uuid + \".\"+  fileExtension;\n            const date = new Date().toLocaleDateString();\n            // Use the mv() method to place the file somewhere on your server\n            const imageDb = new Image({\n                author: login,\n                uuid: uuid,\n                date: date,\n                comment: comment\n            })\n            const imageToSave = await imageDb.save();\n            image.mv(uploadPath, function (err) {\n                if (err)\n                    return res.status(500).send(err);\n                res.status(200).send(imageToSave);\n            })\n        } catch (e) {\n            if(e.name === 'TokenExpiredError') {\n                res.status(400).send(\"Your jwt expired, login again\")\n            } else {\n                res.status(400).send(e)\n            }\n\n        }\n    }\n\n    async getImageMeta (req,res) {\n        const uuid = req.params.id;\n        const image = await Image.findOne(\n            { uuid: uuid }\n        )\n        res.status(200).json(image)\n    }\n\n    async changeImageMeta(req,res) {\n        const uuid = req.params.id;\n        const {author, comment} = req.body;\n        const image = await Image.findOne(\n            { uuid: uuid }\n        )\n        image.author = author;\n        image.comment = comment;\n        await image.save()\n        res.json(image);\n    }\n\n    async getAllImages(req,res) {\n        const uuidsArray = []\n        const images = await Image.find();\n        console.log(images)\n        images.forEach(img => {\n            uuidsArray.push(img.uuid)\n        })\n        res.send(uuidsArray)\n    }\n}\n\n\nexport default new imageController();"],"mappings":";;;;;;AAAA;AACA;AACA;AAAwB;AAGxB,MAAMA,eAAe,CAAC;EAClB,MAAMC,QAAQ,CAAEC,GAAG,EAACC,GAAG,EAAG;IACtB,IAAI;MACA;MACA;MACA,MAAMC,KAAK,GAAGF,GAAG,CAACG,IAAI,CAACD,KAAK;MAC5B,MAAME,OAAO,GAAGJ,GAAG,CAACG,IAAI,CAACC,OAAO;MAChC,MAAMC,IAAI,GAAG,IAAAC,QAAM,GAAE;MACrB,IAAIC,KAAK;MACT,IAAIC,UAAU;MACd,IAAI,CAACR,GAAG,CAACS,KAAK,IAAIC,MAAM,CAACC,IAAI,CAACX,GAAG,CAACS,KAAK,CAAC,CAACG,MAAM,KAAK,CAAC,EAAE;QACnD,OAAOX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,yBAAyB,CAAC;MAC1D;MACAP,KAAK,GAAGP,GAAG,CAACS,KAAK,CAACF,KAAK;MACvB,MAAMQ,aAAa,GAAGR,KAAK,CAACS,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MAC9CT,UAAU,GAAGU,aAAI,CAACC,OAAO,CAACC,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,eAAe,CAAE,GAAG,GAAG,GAAGf,IAAI,GAAG,GAAG,GAAGU,aAAa;MACrG,MAAMM,IAAI,GAAG,IAAIC,IAAI,EAAE,CAACC,kBAAkB,EAAE;MAC5C;MACA,MAAMC,OAAO,GAAG,IAAIC,cAAK,CAAC;QACtBC,MAAM,EAAExB,KAAK;QACbG,IAAI,EAAEA,IAAI;QACVgB,IAAI,EAAEA,IAAI;QACVjB,OAAO,EAAEA;MACb,CAAC,CAAC;MACF,MAAMuB,WAAW,GAAG,MAAMH,OAAO,CAACI,IAAI,EAAE;MACxCrB,KAAK,CAACsB,EAAE,CAACrB,UAAU,EAAE,UAAUsB,GAAG,EAAE;QAChC,IAAIA,GAAG,EACH,OAAO7B,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACgB,GAAG,CAAC;QACpC7B,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACa,WAAW,CAAC;MACrC,CAAC,CAAC;IACN,CAAC,CAAC,OAAOI,CAAC,EAAE;MACR,IAAGA,CAAC,CAACf,IAAI,KAAK,mBAAmB,EAAE;QAC/Bf,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,+BAA+B,CAAC;MACzD,CAAC,MAAM;QACHb,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACiB,CAAC,CAAC;MAC3B;IAEJ;EACJ;EAEA,MAAMC,YAAY,CAAEhC,GAAG,EAACC,GAAG,EAAE;IACzB,MAAMI,IAAI,GAAGL,GAAG,CAACiC,MAAM,CAACC,EAAE;IAC1B,MAAM3B,KAAK,GAAG,MAAMkB,cAAK,CAACU,OAAO,CAC7B;MAAE9B,IAAI,EAAEA;IAAK,CAAC,CACjB;IACDJ,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACuB,IAAI,CAAC7B,KAAK,CAAC;EAC/B;EAEA,MAAM8B,eAAe,CAACrC,GAAG,EAACC,GAAG,EAAE;IAC3B,MAAMI,IAAI,GAAGL,GAAG,CAACiC,MAAM,CAACC,EAAE;IAC1B,MAAM;MAACR,MAAM;MAAEtB;IAAO,CAAC,GAAGJ,GAAG,CAACG,IAAI;IAClC,MAAMI,KAAK,GAAG,MAAMkB,cAAK,CAACU,OAAO,CAC7B;MAAE9B,IAAI,EAAEA;IAAK,CAAC,CACjB;IACDE,KAAK,CAACmB,MAAM,GAAGA,MAAM;IACrBnB,KAAK,CAACH,OAAO,GAAGA,OAAO;IACvB,MAAMG,KAAK,CAACqB,IAAI,EAAE;IAClB3B,GAAG,CAACmC,IAAI,CAAC7B,KAAK,CAAC;EACnB;EAEA,MAAM+B,YAAY,CAACtC,GAAG,EAACC,GAAG,EAAE;IACxB,MAAMsC,UAAU,GAAG,EAAE;IACrB,MAAMC,MAAM,GAAG,MAAMf,cAAK,CAACgB,IAAI,EAAE;IACjCC,OAAO,CAACC,GAAG,CAACH,MAAM,CAAC;IACnBA,MAAM,CAACI,OAAO,CAACC,GAAG,IAAI;MAClBN,UAAU,CAACO,IAAI,CAACD,GAAG,CAACxC,IAAI,CAAC;IAC7B,CAAC,CAAC;IACFJ,GAAG,CAACa,IAAI,CAACyB,UAAU,CAAC;EACxB;AACJ;AAAC,eAGc,IAAIzC,eAAe,EAAE;AAAA"}},"mtime":1676732734337},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/models/image.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst imageSchema = new _mongoose.default.Schema({\n  author: {\n    required: true,\n    type: String\n  },\n  uuid: {\n    required: true,\n    type: String\n  },\n  date: {\n    require: true,\n    type: String\n  },\n  comment: {\n    type: String\n  }\n});\nvar _default = _mongoose.default.model(\"Image\", imageSchema);\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbWFnZVNjaGVtYSIsIm1vbmdvb3NlIiwiU2NoZW1hIiwiYXV0aG9yIiwicmVxdWlyZWQiLCJ0eXBlIiwiU3RyaW5nIiwidXVpZCIsImRhdGUiLCJyZXF1aXJlIiwiY29tbWVudCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9saW51eC9EZXNrdG9wL2dhbGxlcnkvc2VydmVyL3NyYy9tb2RlbHMvIiwic291cmNlcyI6WyJpbWFnZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmNvbnN0IGltYWdlU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gICAgYXV0aG9yOiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgfSxcbiAgICB1dWlkOiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgfSxcbiAgICBkYXRlOiB7XG4gICAgICAgIHJlcXVpcmU6IHRydWUsXG4gICAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0sXG4gICAgY29tbWVudDoge1xuICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWwoXCJJbWFnZVwiLCBpbWFnZVNjaGVtYSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQWdDO0FBRWhDLE1BQU1BLFdBQVcsR0FBRyxJQUFJQyxpQkFBUSxDQUFDQyxNQUFNLENBQUM7RUFDcENDLE1BQU0sRUFBRTtJQUNKQyxRQUFRLEVBQUUsSUFBSTtJQUNkQyxJQUFJLEVBQUVDO0VBQ1YsQ0FBQztFQUNEQyxJQUFJLEVBQUU7SUFDRkgsUUFBUSxFQUFFLElBQUk7SUFDZEMsSUFBSSxFQUFFQztFQUNWLENBQUM7RUFDREUsSUFBSSxFQUFFO0lBQ0ZDLE9BQU8sRUFBRSxJQUFJO0lBQ2JKLElBQUksRUFBRUM7RUFDVixDQUFDO0VBQ0RJLE9BQU8sRUFBRTtJQUNMTCxJQUFJLEVBQUVDO0VBQ1Y7QUFDSixDQUFDLENBQUM7QUFBQyxlQUVZTCxpQkFBUSxDQUFDVSxLQUFLLENBQUMsT0FBTyxFQUFFWCxXQUFXLENBQUM7QUFBQSJ9","map":{"version":3,"names":["imageSchema","mongoose","Schema","author","required","type","String","uuid","date","require","comment","model"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/models/","sources":["image.ts"],"sourcesContent":["import mongoose from \"mongoose\";\n\nconst imageSchema = new mongoose.Schema({\n    author: {\n        required: true,\n        type: String,\n    },\n    uuid: {\n        required: true,\n        type: String,\n    },\n    date: {\n        require: true,\n        type: String\n    },\n    comment: {\n        type: String\n    }\n});\n\nexport default mongoose.model(\"Image\", imageSchema);\n"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,WAAW,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACpCC,MAAM,EAAE;IACJC,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAEC;EACV,CAAC;EACDC,IAAI,EAAE;IACFH,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAEC;EACV,CAAC;EACDE,IAAI,EAAE;IACFC,OAAO,EAAE,IAAI;IACbJ,IAAI,EAAEC;EACV,CAAC;EACDI,OAAO,EAAE;IACLL,IAAI,EAAEC;EACV;AACJ,CAAC,CAAC;AAAC,eAEYL,iBAAQ,CAACU,KAAK,CAAC,OAAO,EAAEX,WAAW,CAAC;AAAA"}},"mtime":1675797744282}}