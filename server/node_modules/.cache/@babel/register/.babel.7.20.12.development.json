{"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/server.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.app = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _dotenv = require(\"dotenv\");\nvar _userRoutes = require(\"./routes/userRoutes\");\nvar _imageRoutes = require(\"./routes/imageRoutes\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n(0, _dotenv.config)();\nconst cors = require(\"cors\");\nconst corsOptions = {\n  origin: '*',\n  credentials: true,\n  //access-control-allow-credentials:true\n  optionSuccessStatus: 200\n};\nconst port = process.env.PORT;\nconst mongoUrl = process.env.MONGO_URL;\n_mongoose.default.connect(mongoUrl).then();\nconst database = _mongoose.default.connection;\ndatabase.on(\"error\", err => {\n  console.log(err);\n});\ndatabase.once(\"connected\", () => {\n  console.log(\"Database Connected\");\n});\nconst app = (0, _express.default)();\nexports.app = app;\napp.use(_express.default.json());\napp.use(_express.default.static('public'));\napp.use(cors(corsOptions));\napp.listen(port, () => {\n  console.log(`Server Started at ${port}`);\n});\napp.use(\"/users\", _userRoutes.userRouter);\napp.use(\"/images\", _imageRoutes.imageRouter);\napp.get('/api', (req, res) => {\n  res.json({\n    name: \"suck\"\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJjb3JzIiwicmVxdWlyZSIsImNvcnNPcHRpb25zIiwib3JpZ2luIiwiY3JlZGVudGlhbHMiLCJvcHRpb25TdWNjZXNzU3RhdHVzIiwicG9ydCIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwibW9uZ29VcmwiLCJNT05HT19VUkwiLCJtb25nb29zZSIsImNvbm5lY3QiLCJ0aGVuIiwiZGF0YWJhc2UiLCJjb25uZWN0aW9uIiwib24iLCJlcnIiLCJjb25zb2xlIiwibG9nIiwib25jZSIsImFwcCIsImV4cHJlc3MiLCJ1c2UiLCJqc29uIiwic3RhdGljIiwibGlzdGVuIiwidXNlclJvdXRlciIsImltYWdlUm91dGVyIiwiZ2V0IiwicmVxIiwicmVzIiwibmFtZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvbGludXgvRGVza3RvcC9nYWxsZXJ5L3NlcnZlci9zcmMvIiwic291cmNlcyI6WyJzZXJ2ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcblxuaW1wb3J0IHtjb25maWd9IGZyb20gXCJkb3RlbnZcIjtcbmNvbmZpZygpO1xuXG5pbXBvcnQge3VzZXJSb3V0ZXJ9IGZyb20gXCIuL3JvdXRlcy91c2VyUm91dGVzXCI7XG5pbXBvcnQge2ltYWdlUm91dGVyfSBmcm9tIFwiLi9yb3V0ZXMvaW1hZ2VSb3V0ZXNcIjtcblxuY29uc3QgY29ycz1yZXF1aXJlKFwiY29yc1wiKTtcbmNvbnN0IGNvcnNPcHRpb25zID17XG4gIG9yaWdpbjonKicsXG4gIGNyZWRlbnRpYWxzOnRydWUsICAgICAgICAgICAgLy9hY2Nlc3MtY29udHJvbC1hbGxvdy1jcmVkZW50aWFsczp0cnVlXG4gIG9wdGlvblN1Y2Nlc3NTdGF0dXM6MjAwLFxufVxuXG5cblxuY29uc3QgcG9ydCA9IHByb2Nlc3MuZW52LlBPUlQ7XG5jb25zdCBtb25nb1VybCA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSTDtcbm1vbmdvb3NlLmNvbm5lY3QobW9uZ29VcmwpLnRoZW4oKTtcbmNvbnN0IGRhdGFiYXNlID0gbW9uZ29vc2UuY29ubmVjdGlvbjtcblxuZGF0YWJhc2Uub24oXCJlcnJvclwiLCAoZXJyKSA9PiB7XG4gIGNvbnNvbGUubG9nKGVycik7XG59KTtcblxuZGF0YWJhc2Uub25jZShcImNvbm5lY3RlZFwiLCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwiRGF0YWJhc2UgQ29ubmVjdGVkXCIpO1xufSk7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKCdwdWJsaWMnKSk7XG5hcHAudXNlKGNvcnMoY29yc09wdGlvbnMpKVxuYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKGBTZXJ2ZXIgU3RhcnRlZCBhdCAke3BvcnR9YCk7XG59KTtcblxuYXBwLnVzZShcIi91c2Vyc1wiLCB1c2VyUm91dGVyKTtcbmFwcC51c2UoXCIvaW1hZ2VzXCIsIGltYWdlUm91dGVyKTtcblxuYXBwLmdldCgnL2FwaScsIChyZXEscmVzKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICBuYW1lOiBcInN1Y2tcIlxuICB9KVxufSlcblxuZXhwb3J0e2FwcH07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFBaUQ7QUFIakQsSUFBQUEsY0FBTSxHQUFFO0FBS1IsTUFBTUMsSUFBSSxHQUFDQyxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzFCLE1BQU1DLFdBQVcsR0FBRTtFQUNqQkMsTUFBTSxFQUFDLEdBQUc7RUFDVkMsV0FBVyxFQUFDLElBQUk7RUFBYTtFQUM3QkMsbUJBQW1CLEVBQUM7QUFDdEIsQ0FBQztBQUlELE1BQU1DLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLElBQUk7QUFDN0IsTUFBTUMsUUFBUSxHQUFHSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csU0FBUztBQUN0Q0MsaUJBQVEsQ0FBQ0MsT0FBTyxDQUFDSCxRQUFRLENBQUMsQ0FBQ0ksSUFBSSxFQUFFO0FBQ2pDLE1BQU1DLFFBQVEsR0FBR0gsaUJBQVEsQ0FBQ0ksVUFBVTtBQUVwQ0QsUUFBUSxDQUFDRSxFQUFFLENBQUMsT0FBTyxFQUFHQyxHQUFHLElBQUs7RUFDNUJDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixHQUFHLENBQUM7QUFDbEIsQ0FBQyxDQUFDO0FBRUZILFFBQVEsQ0FBQ00sSUFBSSxDQUFDLFdBQVcsRUFBRSxNQUFNO0VBQy9CRixPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQztBQUNuQyxDQUFDLENBQUM7QUFFRixNQUFNRSxHQUFHLEdBQUcsSUFBQUMsZ0JBQU8sR0FBRTtBQUFDO0FBRXRCRCxHQUFHLENBQUNFLEdBQUcsQ0FBQ0QsZ0JBQU8sQ0FBQ0UsSUFBSSxFQUFFLENBQUM7QUFDdkJILEdBQUcsQ0FBQ0UsR0FBRyxDQUFDRCxnQkFBTyxDQUFDRyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDakNKLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDeEIsSUFBSSxDQUFDRSxXQUFXLENBQUMsQ0FBQztBQUMxQm9CLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDckIsSUFBSSxFQUFFLE1BQU07RUFDckJhLE9BQU8sQ0FBQ0MsR0FBRyxDQUFFLHFCQUFvQmQsSUFBSyxFQUFDLENBQUM7QUFDMUMsQ0FBQyxDQUFDO0FBRUZnQixHQUFHLENBQUNFLEdBQUcsQ0FBQyxRQUFRLEVBQUVJLHNCQUFVLENBQUM7QUFDN0JOLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLFNBQVMsRUFBRUssd0JBQVcsQ0FBQztBQUUvQlAsR0FBRyxDQUFDUSxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUNDLEdBQUcsRUFBQ0MsR0FBRyxLQUFLO0VBQzNCQSxHQUFHLENBQUNQLElBQUksQ0FBQztJQUNQUSxJQUFJLEVBQUU7RUFDUixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMifQ==","map":{"version":3,"names":["config","cors","require","corsOptions","origin","credentials","optionSuccessStatus","port","process","env","PORT","mongoUrl","MONGO_URL","mongoose","connect","then","database","connection","on","err","console","log","once","app","express","use","json","static","listen","userRouter","imageRouter","get","req","res","name"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/","sources":["server.ts"],"sourcesContent":["import mongoose from \"mongoose\";\nimport express from \"express\";\n\nimport {config} from \"dotenv\";\nconfig();\n\nimport {userRouter} from \"./routes/userRoutes\";\nimport {imageRouter} from \"./routes/imageRoutes\";\n\nconst cors=require(\"cors\");\nconst corsOptions ={\n  origin:'*',\n  credentials:true,            //access-control-allow-credentials:true\n  optionSuccessStatus:200,\n}\n\n\n\nconst port = process.env.PORT;\nconst mongoUrl = process.env.MONGO_URL;\nmongoose.connect(mongoUrl).then();\nconst database = mongoose.connection;\n\ndatabase.on(\"error\", (err) => {\n  console.log(err);\n});\n\ndatabase.once(\"connected\", () => {\n  console.log(\"Database Connected\");\n});\n\nconst app = express();\n\napp.use(express.json());\napp.use(express.static('public'));\napp.use(cors(corsOptions))\napp.listen(port, () => {\n  console.log(`Server Started at ${port}`);\n});\n\napp.use(\"/users\", userRouter);\napp.use(\"/images\", imageRouter);\n\napp.get('/api', (req,res) => {\n  res.json({\n    name: \"suck\"\n  })\n})\n\nexport{app};\n"],"mappings":";;;;;;AAAA;AACA;AAEA;AAGA;AACA;AAAiD;AAHjD,IAAAA,cAAM,GAAE;AAKR,MAAMC,IAAI,GAACC,OAAO,CAAC,MAAM,CAAC;AAC1B,MAAMC,WAAW,GAAE;EACjBC,MAAM,EAAC,GAAG;EACVC,WAAW,EAAC,IAAI;EAAa;EAC7BC,mBAAmB,EAAC;AACtB,CAAC;AAID,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI;AAC7B,MAAMC,QAAQ,GAAGH,OAAO,CAACC,GAAG,CAACG,SAAS;AACtCC,iBAAQ,CAACC,OAAO,CAACH,QAAQ,CAAC,CAACI,IAAI,EAAE;AACjC,MAAMC,QAAQ,GAAGH,iBAAQ,CAACI,UAAU;AAEpCD,QAAQ,CAACE,EAAE,CAAC,OAAO,EAAGC,GAAG,IAAK;EAC5BC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;AAClB,CAAC,CAAC;AAEFH,QAAQ,CAACM,IAAI,CAAC,WAAW,EAAE,MAAM;EAC/BF,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;AACnC,CAAC,CAAC;AAEF,MAAME,GAAG,GAAG,IAAAC,gBAAO,GAAE;AAAC;AAEtBD,GAAG,CAACE,GAAG,CAACD,gBAAO,CAACE,IAAI,EAAE,CAAC;AACvBH,GAAG,CAACE,GAAG,CAACD,gBAAO,CAACG,MAAM,CAAC,QAAQ,CAAC,CAAC;AACjCJ,GAAG,CAACE,GAAG,CAACxB,IAAI,CAACE,WAAW,CAAC,CAAC;AAC1BoB,GAAG,CAACK,MAAM,CAACrB,IAAI,EAAE,MAAM;EACrBa,OAAO,CAACC,GAAG,CAAE,qBAAoBd,IAAK,EAAC,CAAC;AAC1C,CAAC,CAAC;AAEFgB,GAAG,CAACE,GAAG,CAAC,QAAQ,EAAEI,sBAAU,CAAC;AAC7BN,GAAG,CAACE,GAAG,CAAC,SAAS,EAAEK,wBAAW,CAAC;AAE/BP,GAAG,CAACQ,GAAG,CAAC,MAAM,EAAE,CAACC,GAAG,EAACC,GAAG,KAAK;EAC3BA,GAAG,CAACP,IAAI,CAAC;IACPQ,IAAI,EAAE;EACR,CAAC,CAAC;AACJ,CAAC,CAAC"}},"mtime":1676456140883},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/routes/userRoutes.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.userRouter = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _cookieParser = _interopRequireDefault(require(\"cookie-parser\"));\nvar _userController = _interopRequireDefault(require(\"../controllers/userController\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userRouter = _express.default.Router();\nexports.userRouter = userRouter;\nconst sessions = {};\nuserRouter.use((0, _cookieParser.default)(\"secret key\"));\nuserRouter.post(\"/newUser\", _userController.default.newUser);\nuserRouter.post(\"/login\", _userController.default.login);\nuserRouter.post(\"/logout\", _userController.default.logout);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsInNlc3Npb25zIiwidXNlIiwiY29va2llUGFyc2VyIiwicG9zdCIsInVzZXJDb250cm9sbGVyIiwibmV3VXNlciIsImxvZ2luIiwibG9nb3V0Il0sInNvdXJjZVJvb3QiOiIvaG9tZS9saW51eC9EZXNrdG9wL2dhbGxlcnkvc2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJ1c2VyUm91dGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQge3Y0IGFzIHV1aWR9IGZyb20gXCJ1dWlkXCI7XG5cbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSBcImNvb2tpZS1wYXJzZXJcIjtcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuXG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vbW9kZWxzL3VzZXJcIjtcbmltcG9ydCB1c2VyQ29udHJvbGxlciBmcm9tIFwiLi4vY29udHJvbGxlcnMvdXNlckNvbnRyb2xsZXJcIjtcbmNvbnN0IHVzZXJSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5jb25zdCBzZXNzaW9ucyA9IHt9O1xuXG5cbnVzZXJSb3V0ZXIudXNlKGNvb2tpZVBhcnNlcihcInNlY3JldCBrZXlcIikpO1xuXG51c2VyUm91dGVyLnBvc3QoXCIvbmV3VXNlclwiLCB1c2VyQ29udHJvbGxlci5uZXdVc2VyKTtcbnVzZXJSb3V0ZXIucG9zdChcIi9sb2dpblwiLCAgdXNlckNvbnRyb2xsZXIubG9naW4pO1xudXNlclJvdXRlci5wb3N0KFwiL2xvZ291dFwiLCB1c2VyQ29udHJvbGxlci5sb2dvdXQpO1xuXG5leHBvcnR7dXNlclJvdXRlcn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBR0E7QUFJQTtBQUEyRDtBQUMzRCxNQUFNQSxVQUFVLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUFDO0FBRXBDLE1BQU1DLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFHbkJILFVBQVUsQ0FBQ0ksR0FBRyxDQUFDLElBQUFDLHFCQUFZLEVBQUMsWUFBWSxDQUFDLENBQUM7QUFFMUNMLFVBQVUsQ0FBQ00sSUFBSSxDQUFDLFVBQVUsRUFBRUMsdUJBQWMsQ0FBQ0MsT0FBTyxDQUFDO0FBQ25EUixVQUFVLENBQUNNLElBQUksQ0FBQyxRQUFRLEVBQUdDLHVCQUFjLENBQUNFLEtBQUssQ0FBQztBQUNoRFQsVUFBVSxDQUFDTSxJQUFJLENBQUMsU0FBUyxFQUFFQyx1QkFBYyxDQUFDRyxNQUFNLENBQUMifQ==","map":{"version":3,"names":["userRouter","express","Router","sessions","use","cookieParser","post","userController","newUser","login","logout"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/routes/","sources":["userRoutes.ts"],"sourcesContent":["import express from \"express\";\nimport {v4 as uuid} from \"uuid\";\n\nimport cookieParser from \"cookie-parser\";\nimport jwt from \"jsonwebtoken\";\n\nimport User from \"../models/user\";\nimport userController from \"../controllers/userController\";\nconst userRouter = express.Router();\n\nconst sessions = {};\n\n\nuserRouter.use(cookieParser(\"secret key\"));\n\nuserRouter.post(\"/newUser\", userController.newUser);\nuserRouter.post(\"/login\",  userController.login);\nuserRouter.post(\"/logout\", userController.logout);\n\nexport{userRouter};\n"],"mappings":";;;;;;AAAA;AAGA;AAIA;AAA2D;AAC3D,MAAMA,UAAU,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAAC;AAEpC,MAAMC,QAAQ,GAAG,CAAC,CAAC;AAGnBH,UAAU,CAACI,GAAG,CAAC,IAAAC,qBAAY,EAAC,YAAY,CAAC,CAAC;AAE1CL,UAAU,CAACM,IAAI,CAAC,UAAU,EAAEC,uBAAc,CAACC,OAAO,CAAC;AACnDR,UAAU,CAACM,IAAI,CAAC,QAAQ,EAAGC,uBAAc,CAACE,KAAK,CAAC;AAChDT,UAAU,CAACM,IAAI,CAAC,SAAS,EAAEC,uBAAc,CAACG,MAAM,CAAC"}},"mtime":1675797744282},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/controllers/userController.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _user = _interopRequireDefault(require(\"../models/user\"));\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst doesUserExistCheck = async function (login, password) {\n  const doesUserExist = await _user.default.findOne({\n    $and: [{\n      login: login\n    }, {\n      password: password\n    }]\n  }, (err, res) => {\n    if (err) {\n      res.status(500).send(err);\n      return;\n    }\n    return true;\n  }).clone().catch(function (err) {\n    console.log(err);\n  });\n  return doesUserExist;\n};\nclass userController {\n  async newUser(req, res) {\n    const {\n      login,\n      password\n    } = req.body;\n    const doesUserExist = await doesUserExistCheck(login, password);\n    if (!doesUserExist) {\n      const user = new _user.default({\n        login: req.body.login,\n        password: req.body.password\n      });\n      try {\n        const userToSave = await user.save();\n        res.status(301).json(userToSave);\n      } catch (error) {\n        res.status(400).json({\n          message: error.message\n        });\n      }\n    } else {\n      res.status(301).json({\n        message: \"this user already exists\"\n      });\n    }\n  }\n  async login(req, res) {\n    const {\n      login,\n      password,\n      _id\n    } = req.body;\n    const doesUserExist = await doesUserExistCheck(login, password);\n    if (doesUserExist) {\n      const token = req.cookies['set-cookie'];\n      try {\n        let userAuthorized = token && _jsonwebtoken.default.verify(token, process.env.JWT_SECRET_KEY);\n        console.log(userAuthorized);\n        if (!userAuthorized) {\n          const token = _jsonwebtoken.default.sign({\n            login,\n            password\n          }, process.env.JWT_SECRET_KEY, {\n            expiresIn: \"15m\"\n          });\n          res.cookie(\"set-cookie\", token, {\n            httpOnly: true\n          });\n          res.status(200).send({\n            login,\n            password\n          });\n        } else {\n          res.status(200).json({\n            message: \"you are  logged in\"\n          });\n        }\n      } catch (e) {\n        console.log(e);\n        res.status(400).json({\n          message: \"log in again, jwt has already expired\"\n        });\n      }\n    } else {\n      res.status(401).json({\n        message: \"you are not signed up\"\n      });\n    }\n  }\n  async logout(req, res) {\n    res.clearCookie('set-cookie');\n    res.status(200).send(\"you logged out\");\n  }\n}\nvar _default = new userController();\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb2VzVXNlckV4aXN0Q2hlY2siLCJsb2dpbiIsInBhc3N3b3JkIiwiZG9lc1VzZXJFeGlzdCIsIlVzZXIiLCJmaW5kT25lIiwiJGFuZCIsImVyciIsInJlcyIsInN0YXR1cyIsInNlbmQiLCJjbG9uZSIsImNhdGNoIiwiY29uc29sZSIsImxvZyIsInVzZXJDb250cm9sbGVyIiwibmV3VXNlciIsInJlcSIsImJvZHkiLCJ1c2VyIiwidXNlclRvU2F2ZSIsInNhdmUiLCJqc29uIiwiZXJyb3IiLCJtZXNzYWdlIiwiX2lkIiwidG9rZW4iLCJjb29raWVzIiwidXNlckF1dGhvcml6ZWQiLCJqd3QiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVF9LRVkiLCJzaWduIiwiZXhwaXJlc0luIiwiY29va2llIiwiaHR0cE9ubHkiLCJlIiwibG9nb3V0IiwiY2xlYXJDb29raWUiXSwic291cmNlUm9vdCI6Ii9ob21lL2xpbnV4L0Rlc2t0b3AvZ2FsbGVyeS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsidXNlckNvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVzZXIgZnJvbSBcIi4uL21vZGVscy91c2VyXCI7XG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcbmltcG9ydCB1c2VyIGZyb20gXCIuLi9tb2RlbHMvdXNlclwiO1xuXG5cbmNvbnN0IGRvZXNVc2VyRXhpc3RDaGVjayA9IGFzeW5jIGZ1bmN0aW9uKGxvZ2luLCBwYXNzd29yZCkge1xuICAgIGNvbnN0IGRvZXNVc2VyRXhpc3QgPSBhd2FpdCBVc2VyLmZpbmRPbmUoXG4gICAgICAgIHsgJGFuZDogW3sgbG9naW46IGxvZ2luIH0sIHsgcGFzc3dvcmQ6IHBhc3N3b3JkIH1dIH0sXG4gICAgICAgIChlcnIsIHJlcykgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICApXG4gICAgICAgIC5jbG9uZSgpXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KTtcbiAgICByZXR1cm4gZG9lc1VzZXJFeGlzdFxufVxuXG5jbGFzcyB1c2VyQ29udHJvbGxlciB7XG4gICAgYXN5bmMgbmV3VXNlciAgKHJlcSxyZXMpIHtcbiAgICAgICAgY29uc3QgeyBsb2dpbiwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCBkb2VzVXNlckV4aXN0ID0gYXdhaXQgZG9lc1VzZXJFeGlzdENoZWNrKGxvZ2luLCBwYXNzd29yZCk7XG4gICAgICAgIGlmKCFkb2VzVXNlckV4aXN0KSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgICAgICAgICAgIGxvZ2luOiByZXEuYm9keS5sb2dpbixcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogcmVxLmJvZHkucGFzc3dvcmQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlclRvU2F2ZSA9IGF3YWl0IHVzZXIuc2F2ZSgpO1xuXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygzMDEpLmpzb24odXNlclRvU2F2ZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHttZXNzYWdlOiBlcnJvci5tZXNzYWdlfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDMwMSkuanNvbih7bWVzc2FnZTogXCJ0aGlzIHVzZXIgYWxyZWFkeSBleGlzdHNcIn0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBsb2dpbihyZXEscmVzKSB7XG4gICAgICAgIGNvbnN0IHsgbG9naW4sIHBhc3N3b3JkLCBfaWQgfSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCBkb2VzVXNlckV4aXN0ID0gYXdhaXQgZG9lc1VzZXJFeGlzdENoZWNrKGxvZ2luLCBwYXNzd29yZCk7XG4gICAgICAgIGlmIChkb2VzVXNlckV4aXN0KSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzWydzZXQtY29va2llJ107XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGxldCB1c2VyQXV0aG9yaXplZCA9IHRva2VuICYmIGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVRfS0VZKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyQXV0aG9yaXplZClcbiAgICAgICAgICAgICAgICBpZiAoIXVzZXJBdXRob3JpemVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9naW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVF9LRVksXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGV4cGlyZXNJbjogXCIxNW1cIiB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5jb29raWUoXCJzZXQtY29va2llXCIsIHRva2VuLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe21lc3NhZ2U6IFwieW91IGFyZSAgbG9nZ2VkIGluXCJ9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe21lc3NhZ2U6IFwibG9nIGluIGFnYWluLCBqd3QgaGFzIGFscmVhZHkgZXhwaXJlZFwifSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oe21lc3NhZ2U6IFwieW91IGFyZSBub3Qgc2lnbmVkIHVwXCJ9KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgbG9nb3V0IChyZXEscmVzKSB7XG4gICAgICAgIHJlcy5jbGVhckNvb2tpZSgnc2V0LWNvb2tpZScpO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChcInlvdSBsb2dnZWQgb3V0XCIpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IHVzZXJDb250cm9sbGVyKCk7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQStCO0FBSS9CLE1BQU1BLGtCQUFrQixHQUFHLGdCQUFlQyxLQUFLLEVBQUVDLFFBQVEsRUFBRTtFQUN2RCxNQUFNQyxhQUFhLEdBQUcsTUFBTUMsYUFBSSxDQUFDQyxPQUFPLENBQ3BDO0lBQUVDLElBQUksRUFBRSxDQUFDO01BQUVMLEtBQUssRUFBRUE7SUFBTSxDQUFDLEVBQUU7TUFBRUMsUUFBUSxFQUFFQTtJQUFTLENBQUM7RUFB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","map":{"version":3,"names":["doesUserExistCheck","login","password","doesUserExist","User","findOne","$and","err","res","status","send","clone","catch","console","log","userController","newUser","req","body","user","userToSave","save","json","error","message","_id","token","cookies","userAuthorized","jwt","verify","process","env","JWT_SECRET_KEY","sign","expiresIn","cookie","httpOnly","e","logout","clearCookie"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/controllers/","sources":["userController.ts"],"sourcesContent":["import User from \"../models/user\";\nimport jwt from \"jsonwebtoken\";\nimport user from \"../models/user\";\n\n\nconst doesUserExistCheck = async function(login, password) {\n    const doesUserExist = await User.findOne(\n        { $and: [{ login: login }, { password: password }] },\n        (err, res) => {\n            if (err) {\n                res.status(500).send(err);\n                return;\n            }\n            return true;\n        }\n    )\n        .clone()\n        .catch(function (err) {\n            console.log(err);\n        });\n    return doesUserExist\n}\n\nclass userController {\n    async newUser  (req,res) {\n        const { login, password } = req.body;\n        const doesUserExist = await doesUserExistCheck(login, password);\n        if(!doesUserExist) {\n            const user = new User({\n                login: req.body.login,\n                password: req.body.password,\n            });\n            try {\n                const userToSave = await user.save();\n\n                res.status(301).json(userToSave);\n            } catch (error) {\n                res.status(400).json({message: error.message});\n            }\n        } else {\n            res.status(301).json({message: \"this user already exists\"})\n        }\n    }\n\n    async login(req,res) {\n        const { login, password, _id } = req.body;\n        const doesUserExist = await doesUserExistCheck(login, password);\n        if (doesUserExist) {\n            const token = req.cookies['set-cookie'];\n            try {\n                let userAuthorized = token && jwt.verify(token, process.env.JWT_SECRET_KEY);\n                console.log(userAuthorized)\n                if (!userAuthorized) {\n                    const token = jwt.sign(\n                        {\n                            login,\n                            password,\n                        },\n                        process.env.JWT_SECRET_KEY,\n                        { expiresIn: \"15m\" }\n                    );\n                    res.cookie(\"set-cookie\", token, {\n                        httpOnly: true,\n                    });\n                    res.status(200).send({\n                        login,\n                        password,\n                    })\n                } else {\n                    res.status(200).json({message: \"you are  logged in\"})\n                }\n            } catch(e) {\n                console.log(e)\n                res.status(400).json({message: \"log in again, jwt has already expired\"})\n            }\n\n        } else {\n            res.status(401).json({message: \"you are not signed up\"})\n        }\n    }\n\n    async logout (req,res) {\n        res.clearCookie('set-cookie');\n        res.status(200).send(\"you logged out\");\n    }\n}\n\nexport default new userController();"],"mappings":"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"}},"mtime":1675797744282},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/models/user.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userSchema = new _mongoose.default.Schema({\n  login: {\n    required: true,\n    type: String\n  },\n  password: {\n    required: true,\n    type: String\n  }\n});\nvar _default = _mongoose.default.model(\"User\", userSchema);\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJsb2dpbiIsInJlcXVpcmVkIiwidHlwZSIsIlN0cmluZyIsInBhc3N3b3JkIiwibW9kZWwiXSwic291cmNlUm9vdCI6Ii9ob21lL2xpbnV4L0Rlc2t0b3AvZ2FsbGVyeS9zZXJ2ZXIvc3JjL21vZGVscy8iLCJzb3VyY2VzIjpbInVzZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIGxvZ2luOiB7XG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBwYXNzd29yZDoge1xuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbChcIlVzZXJcIiwgdXNlclNjaGVtYSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQWdDO0FBRWhDLE1BQU1BLFVBQVUsR0FBRyxJQUFJQyxpQkFBUSxDQUFDQyxNQUFNLENBQUM7RUFDckNDLEtBQUssRUFBRTtJQUNMQyxRQUFRLEVBQUUsSUFBSTtJQUNkQyxJQUFJLEVBQUVDO0VBQ1IsQ0FBQztFQUNEQyxRQUFRLEVBQUU7SUFDUkgsUUFBUSxFQUFFLElBQUk7SUFDZEMsSUFBSSxFQUFFQztFQUNSO0FBQ0YsQ0FBQyxDQUFDO0FBQUMsZUFFWUwsaUJBQVEsQ0FBQ08sS0FBSyxDQUFDLE1BQU0sRUFBRVIsVUFBVSxDQUFDO0FBQUEifQ==","map":{"version":3,"names":["userSchema","mongoose","Schema","login","required","type","String","password","model"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/models/","sources":["user.ts"],"sourcesContent":["import mongoose from \"mongoose\";\n\nconst userSchema = new mongoose.Schema({\n  login: {\n    required: true,\n    type: String,\n  },\n  password: {\n    required: true,\n    type: String,\n  },\n});\n\nexport default mongoose.model(\"User\", userSchema);\n"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,UAAU,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACrCC,KAAK,EAAE;IACLC,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAEC;EACR,CAAC;EACDC,QAAQ,EAAE;IACRH,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAEC;EACR;AACF,CAAC,CAAC;AAAC,eAEYL,iBAAQ,CAACO,KAAK,CAAC,MAAM,EAAER,UAAU,CAAC;AAAA"}},"mtime":1675504296837},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/routes/imageRoutes.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.imageRouter = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _imageController = _interopRequireDefault(require(\"../controllers/imageController\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst fileUpload = require('express-fileupload');\nconst checkAuth = require('../../middleware/auth');\nconst imageRouter = _express.default.Router();\nexports.imageRouter = imageRouter;\nimageRouter.use(checkAuth);\nimageRouter.use(fileUpload({\n  createParentPath: true\n}));\nimageRouter.post('/image/:id', _imageController.default.setImage);\nimageRouter.get('/image/:id', _imageController.default.getImageMeta);\nimageRouter.put('/image/:id', _imageController.default.changeImageMeta);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmaWxlVXBsb2FkIiwicmVxdWlyZSIsImNoZWNrQXV0aCIsImltYWdlUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsInVzZSIsImNyZWF0ZVBhcmVudFBhdGgiLCJwb3N0IiwiaW1hZ2VDb250cm9sbGVyIiwic2V0SW1hZ2UiLCJnZXQiLCJnZXRJbWFnZU1ldGEiLCJwdXQiLCJjaGFuZ2VJbWFnZU1ldGEiXSwic291cmNlUm9vdCI6Ii9ob21lL2xpbnV4L0Rlc2t0b3AvZ2FsbGVyeS9zZXJ2ZXIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzIjpbImltYWdlUm91dGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuY29uc3QgZmlsZVVwbG9hZCA9IHJlcXVpcmUoJ2V4cHJlc3MtZmlsZXVwbG9hZCcpO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgaW1hZ2VDb250cm9sbGVyIGZyb20gXCIuLi9jb250cm9sbGVycy9pbWFnZUNvbnRyb2xsZXJcIjtcblxuY29uc3QgY2hlY2tBdXRoID0gcmVxdWlyZSgnLi4vLi4vbWlkZGxld2FyZS9hdXRoJyk7XG5cbmNvbnN0IGltYWdlUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuaW1hZ2VSb3V0ZXIudXNlKGNoZWNrQXV0aClcblxuaW1hZ2VSb3V0ZXIudXNlKGZpbGVVcGxvYWQoe1xuICAgIGNyZWF0ZVBhcmVudFBhdGg6IHRydWVcbn0pKTtcblxuXG5pbWFnZVJvdXRlci5wb3N0KCcvaW1hZ2UvOmlkJywgaW1hZ2VDb250cm9sbGVyLnNldEltYWdlKTtcbmltYWdlUm91dGVyLmdldCgnL2ltYWdlLzppZCcsIGltYWdlQ29udHJvbGxlci5nZXRJbWFnZU1ldGEpXG5pbWFnZVJvdXRlci5wdXQoJy9pbWFnZS86aWQnLCBpbWFnZUNvbnRyb2xsZXIuY2hhbmdlSW1hZ2VNZXRhKVxuXG5leHBvcnR7aW1hZ2VSb3V0ZXJ9OyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFHQTtBQUE2RDtBQUY3RCxNQUFNQSxVQUFVLEdBQUdDLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztBQUloRCxNQUFNQyxTQUFTLEdBQUdELE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztBQUVsRCxNQUFNRSxXQUFXLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUFDO0FBRXJDRixXQUFXLENBQUNHLEdBQUcsQ0FBQ0osU0FBUyxDQUFDO0FBRTFCQyxXQUFXLENBQUNHLEdBQUcsQ0FBQ04sVUFBVSxDQUFDO0VBQ3ZCTyxnQkFBZ0IsRUFBRTtBQUN0QixDQUFDLENBQUMsQ0FBQztBQUdISixXQUFXLENBQUNLLElBQUksQ0FBQyxZQUFZLEVBQUVDLHdCQUFlLENBQUNDLFFBQVEsQ0FBQztBQUN4RFAsV0FBVyxDQUFDUSxHQUFHLENBQUMsWUFBWSxFQUFFRix3QkFBZSxDQUFDRyxZQUFZLENBQUM7QUFDM0RULFdBQVcsQ0FBQ1UsR0FBRyxDQUFDLFlBQVksRUFBRUosd0JBQWUsQ0FBQ0ssZUFBZSxDQUFDIn0=","map":{"version":3,"names":["fileUpload","require","checkAuth","imageRouter","express","Router","use","createParentPath","post","imageController","setImage","get","getImageMeta","put","changeImageMeta"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/routes/","sources":["imageRoutes.ts"],"sourcesContent":["import express from 'express';\nconst fileUpload = require('express-fileupload');\nimport { v4 as uuidv4 } from 'uuid';\nimport imageController from \"../controllers/imageController\";\n\nconst checkAuth = require('../../middleware/auth');\n\nconst imageRouter = express.Router();\n\nimageRouter.use(checkAuth)\n\nimageRouter.use(fileUpload({\n    createParentPath: true\n}));\n\n\nimageRouter.post('/image/:id', imageController.setImage);\nimageRouter.get('/image/:id', imageController.getImageMeta)\nimageRouter.put('/image/:id', imageController.changeImageMeta)\n\nexport{imageRouter};"],"mappings":";;;;;;AAAA;AAGA;AAA6D;AAF7D,MAAMA,UAAU,GAAGC,OAAO,CAAC,oBAAoB,CAAC;AAIhD,MAAMC,SAAS,GAAGD,OAAO,CAAC,uBAAuB,CAAC;AAElD,MAAME,WAAW,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAAC;AAErCF,WAAW,CAACG,GAAG,CAACJ,SAAS,CAAC;AAE1BC,WAAW,CAACG,GAAG,CAACN,UAAU,CAAC;EACvBO,gBAAgB,EAAE;AACtB,CAAC,CAAC,CAAC;AAGHJ,WAAW,CAACK,IAAI,CAAC,YAAY,EAAEC,wBAAe,CAACC,QAAQ,CAAC;AACxDP,WAAW,CAACQ,GAAG,CAAC,YAAY,EAAEF,wBAAe,CAACG,YAAY,CAAC;AAC3DT,WAAW,CAACU,GAAG,CAAC,YAAY,EAAEJ,wBAAe,CAACK,eAAe,CAAC"}},"mtime":1676456717552},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/controllers/imageController.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _image = _interopRequireDefault(require(\"../models/image\"));\nvar _uuid = require(\"uuid\");\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nclass imageController {\n  async setImage(req, res) {\n    try {\n      const token = req.headers?.cookie.split('set-cookie=').join('');\n      const {\n        login\n      } = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET_KEY);\n      const comment = req.body.comment;\n      const uuid = (0, _uuid.v4)();\n      let image;\n      let uploadPath;\n      if (!req.files || Object.keys(req.files).length === 0) {\n        return res.status(400).send('No files were uploaded.');\n      }\n      image = req.files.image;\n      const fileExtension = image.name.split('.')[1];\n      uploadPath = _path.default.resolve(__dirname, '..', '..', \"public/images\") + \"/\" + uuid + \".\" + fileExtension;\n      const date = new Date().toLocaleDateString();\n      // Use the mv() method to place the file somewhere on your server\n      const imageDb = new _image.default({\n        author: login,\n        uuid: uuid,\n        date: date,\n        comment: comment\n      });\n      const imageToSave = await imageDb.save();\n      image.mv(uploadPath, function (err) {\n        if (err) return res.status(500).send(err);\n        res.status(301).send(imageToSave);\n      });\n    } catch (e) {\n      if (e.name === 'TokenExpiredError') {\n        res.status(400).send(\"Your jwt expired, login again\");\n      } else {\n        res.status(400).send(e);\n      }\n    }\n  }\n  async getImageMeta(req, res) {\n    const uuid = req.params.id;\n    const image = await _image.default.findOne({\n      uuid: uuid\n    });\n    res.status(200).json(image);\n  }\n  async changeImageMeta(req, res) {\n    const uuid = req.params.id;\n    const {\n      author,\n      comment\n    } = req.body;\n    const image = await _image.default.findOne({\n      uuid: uuid\n    });\n    image.author = author;\n    image.comment = comment;\n    await image.save();\n    res.json(image);\n  }\n}\nvar _default = new imageController();\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbWFnZUNvbnRyb2xsZXIiLCJzZXRJbWFnZSIsInJlcSIsInJlcyIsInRva2VuIiwiaGVhZGVycyIsImNvb2tpZSIsInNwbGl0Iiwiam9pbiIsImxvZ2luIiwiand0IiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVRfS0VZIiwiY29tbWVudCIsImJvZHkiLCJ1dWlkIiwidXVpZHY0IiwiaW1hZ2UiLCJ1cGxvYWRQYXRoIiwiZmlsZXMiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwic3RhdHVzIiwic2VuZCIsImZpbGVFeHRlbnNpb24iLCJuYW1lIiwicGF0aCIsInJlc29sdmUiLCJfX2Rpcm5hbWUiLCJkYXRlIiwiRGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImltYWdlRGIiLCJJbWFnZSIsImF1dGhvciIsImltYWdlVG9TYXZlIiwic2F2ZSIsIm12IiwiZXJyIiwiZSIsImdldEltYWdlTWV0YSIsInBhcmFtcyIsImlkIiwiZmluZE9uZSIsImpzb24iLCJjaGFuZ2VJbWFnZU1ldGEiXSwic291cmNlUm9vdCI6Ii9ob21lL2xpbnV4L0Rlc2t0b3AvZ2FsbGVyeS9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiaW1hZ2VDb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBJbWFnZSBmcm9tIFwiLi4vbW9kZWxzL2ltYWdlXCI7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcbmltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbHMvdXNlclwiO1xuXG5jbGFzcyBpbWFnZUNvbnRyb2xsZXIge1xuICAgIGFzeW5jIHNldEltYWdlIChyZXEscmVzICkge1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXJzPy5jb29raWUuc3BsaXQoJ3NldC1jb29raWU9Jykuam9pbignJyk7XG4gICAgICAgICAgICBjb25zdCB7bG9naW59ID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVF9LRVkpO1xuICAgICAgICAgICAgY29uc3QgY29tbWVudCA9IHJlcS5ib2R5LmNvbW1lbnQ7XG4gICAgICAgICAgICBjb25zdCB1dWlkID0gdXVpZHY0KCk7XG4gICAgICAgICAgICBsZXQgaW1hZ2U7XG4gICAgICAgICAgICBsZXQgdXBsb2FkUGF0aDtcbiAgICAgICAgICAgIGlmICghcmVxLmZpbGVzIHx8IE9iamVjdC5rZXlzKHJlcS5maWxlcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdObyBmaWxlcyB3ZXJlIHVwbG9hZGVkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW1hZ2UgPSByZXEuZmlsZXMuaW1hZ2U7XG4gICAgICAgICAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gaW1hZ2UubmFtZS5zcGxpdCgnLicpWzFdXG4gICAgICAgICAgICB1cGxvYWRQYXRoID0gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJy4uJywgJy4uJywgXCJwdWJsaWMvaW1hZ2VzXCIgKSArIFwiL1wiICsgdXVpZCArIFwiLlwiKyAgZmlsZUV4dGVuc2lvbjtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICAgICAgICAgICAgLy8gVXNlIHRoZSBtdigpIG1ldGhvZCB0byBwbGFjZSB0aGUgZmlsZSBzb21ld2hlcmUgb24geW91ciBzZXJ2ZXJcbiAgICAgICAgICAgIGNvbnN0IGltYWdlRGIgPSBuZXcgSW1hZ2Uoe1xuICAgICAgICAgICAgICAgIGF1dGhvcjogbG9naW4sXG4gICAgICAgICAgICAgICAgdXVpZDogdXVpZCxcbiAgICAgICAgICAgICAgICBkYXRlOiBkYXRlLFxuICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGNvbW1lbnRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zdCBpbWFnZVRvU2F2ZSA9IGF3YWl0IGltYWdlRGIuc2F2ZSgpO1xuICAgICAgICAgICAgaW1hZ2UubXYodXBsb2FkUGF0aCwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZChlcnIpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMzAxKS5zZW5kKGltYWdlVG9TYXZlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmKGUubmFtZSA9PT0gJ1Rva2VuRXhwaXJlZEVycm9yJykge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKFwiWW91ciBqd3QgZXhwaXJlZCwgbG9naW4gYWdhaW5cIilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoZSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0SW1hZ2VNZXRhIChyZXEscmVzKSB7XG4gICAgICAgIGNvbnN0IHV1aWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IEltYWdlLmZpbmRPbmUoXG4gICAgICAgICAgICB7IHV1aWQ6IHV1aWQgfVxuICAgICAgICApXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGltYWdlKVxuICAgIH1cblxuICAgIGFzeW5jIGNoYW5nZUltYWdlTWV0YShyZXEscmVzKSB7XG4gICAgICAgIGNvbnN0IHV1aWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgICBjb25zdCB7YXV0aG9yLCBjb21tZW50fSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IEltYWdlLmZpbmRPbmUoXG4gICAgICAgICAgICB7IHV1aWQ6IHV1aWQgfVxuICAgICAgICApXG4gICAgICAgIGltYWdlLmF1dGhvciA9IGF1dGhvcjtcbiAgICAgICAgaW1hZ2UuY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgICAgIGF3YWl0IGltYWdlLnNhdmUoKVxuICAgICAgICByZXMuanNvbihpbWFnZSk7XG4gICAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBpbWFnZUNvbnRyb2xsZXIoKTsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQStCO0FBRy9CLE1BQU1BLGVBQWUsQ0FBQztFQUNsQixNQUFNQyxRQUFRLENBQUVDLEdBQUcsRUFBQ0MsR0FBRyxFQUFHO0lBRXRCLElBQUk7TUFDQSxNQUFNQyxLQUFLLEdBQUdGLEdBQUcsQ0FBQ0csT0FBTyxFQUFFQyxNQUFNLENBQUNDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLEVBQUUsQ0FBQztNQUMvRCxNQUFNO1FBQUNDO01BQUssQ0FBQyxHQUFHQyxxQkFBRyxDQUFDQyxNQUFNLENBQUNQLEtBQUssRUFBRVEsT0FBTyxDQUFDQyxHQUFHLENBQUNDLGNBQWMsQ0FBQztNQUM3RCxNQUFNQyxPQUFPLEdBQUdiLEdBQUcsQ0FBQ2MsSUFBSSxDQUFDRCxPQUFPO01BQ2hDLE1BQU1FLElBQUksR0FBRyxJQUFBQyxRQUFNLEdBQUU7TUFDckIsSUFBSUMsS0FBSztNQUNULElBQUlDLFVBQVU7TUFDZCxJQUFJLENBQUNsQixHQUFHLENBQUNtQixLQUFLLElBQUlDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDckIsR0FBRyxDQUFDbUIsS0FBSyxDQUFDLENBQUNHLE1BQU0sS0FBSyxDQUFDLEVBQUU7UUFDbkQsT0FBT3JCLEdBQUcsQ0FBQ3NCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLHlCQUF5QixDQUFDO01BQzFEO01BQ0FQLEtBQUssR0FBR2pCLEdBQUcsQ0FBQ21CLEtBQUssQ0FBQ0YsS0FBSztN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","map":{"version":3,"names":["imageController","setImage","req","res","token","headers","cookie","split","join","login","jwt","verify","process","env","JWT_SECRET_KEY","comment","body","uuid","uuidv4","image","uploadPath","files","Object","keys","length","status","send","fileExtension","name","path","resolve","__dirname","date","Date","toLocaleDateString","imageDb","Image","author","imageToSave","save","mv","err","e","getImageMeta","params","id","findOne","json","changeImageMeta"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/controllers/","sources":["imageController.ts"],"sourcesContent":["import Image from \"../models/image\";\nimport { v4 as uuidv4 } from 'uuid';\nimport path from \"path\";\nimport jwt from \"jsonwebtoken\";\nimport User from \"../models/user\";\n\nclass imageController {\n    async setImage (req,res ) {\n\n        try {\n            const token = req.headers?.cookie.split('set-cookie=').join('');\n            const {login} = jwt.verify(token, process.env.JWT_SECRET_KEY);\n            const comment = req.body.comment;\n            const uuid = uuidv4();\n            let image;\n            let uploadPath;\n            if (!req.files || Object.keys(req.files).length === 0) {\n                return res.status(400).send('No files were uploaded.');\n            }\n            image = req.files.image;\n            const fileExtension = image.name.split('.')[1]\n            uploadPath = path.resolve(__dirname, '..', '..', \"public/images\" ) + \"/\" + uuid + \".\"+  fileExtension;\n            const date = new Date().toLocaleDateString();\n            // Use the mv() method to place the file somewhere on your server\n            const imageDb = new Image({\n                author: login,\n                uuid: uuid,\n                date: date,\n                comment: comment\n            })\n            const imageToSave = await imageDb.save();\n            image.mv(uploadPath, function (err) {\n                if (err)\n                    return res.status(500).send(err);\n                res.status(301).send(imageToSave);\n            })\n        } catch (e) {\n            if(e.name === 'TokenExpiredError') {\n                res.status(400).send(\"Your jwt expired, login again\")\n            } else {\n                res.status(400).send(e)\n            }\n\n        }\n    }\n\n    async getImageMeta (req,res) {\n        const uuid = req.params.id;\n        const image = await Image.findOne(\n            { uuid: uuid }\n        )\n        res.status(200).json(image)\n    }\n\n    async changeImageMeta(req,res) {\n        const uuid = req.params.id;\n        const {author, comment} = req.body;\n        const image = await Image.findOne(\n            { uuid: uuid }\n        )\n        image.author = author;\n        image.comment = comment;\n        await image.save()\n        res.json(image);\n    }\n}\n\n\nexport default new imageController();"],"mappings":"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"}},"mtime":1675797744282},"{\"assumptions\":{},\"sourceRoot\":\"/home/linux/Desktop/gallery/server/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/linux/Desktop/gallery/server\",\"filename\":\"/home/linux/Desktop/gallery/server/src/models/image.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/linux/Desktop/gallery/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null],\"exit\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSSatisfiesExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"TSInstantiationExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"allowNamespaces\":true,\"disallowAmbiguousJSXLike\":false,\"isTSX\":false,\"jsxPragmaFrag\":\"React.Fragment\",\"optimizeConstEnums\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.12:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst imageSchema = new _mongoose.default.Schema({\n  author: {\n    required: true,\n    type: String\n  },\n  uuid: {\n    required: true,\n    type: String\n  },\n  date: {\n    require: true,\n    type: String\n  },\n  comment: {\n    type: String\n  }\n});\nvar _default = _mongoose.default.model(\"Image\", imageSchema);\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbWFnZVNjaGVtYSIsIm1vbmdvb3NlIiwiU2NoZW1hIiwiYXV0aG9yIiwicmVxdWlyZWQiLCJ0eXBlIiwiU3RyaW5nIiwidXVpZCIsImRhdGUiLCJyZXF1aXJlIiwiY29tbWVudCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9saW51eC9EZXNrdG9wL2dhbGxlcnkvc2VydmVyL3NyYy9tb2RlbHMvIiwic291cmNlcyI6WyJpbWFnZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmNvbnN0IGltYWdlU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gICAgYXV0aG9yOiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgfSxcbiAgICB1dWlkOiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgfSxcbiAgICBkYXRlOiB7XG4gICAgICAgIHJlcXVpcmU6IHRydWUsXG4gICAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0sXG4gICAgY29tbWVudDoge1xuICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWwoXCJJbWFnZVwiLCBpbWFnZVNjaGVtYSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQWdDO0FBRWhDLE1BQU1BLFdBQVcsR0FBRyxJQUFJQyxpQkFBUSxDQUFDQyxNQUFNLENBQUM7RUFDcENDLE1BQU0sRUFBRTtJQUNKQyxRQUFRLEVBQUUsSUFBSTtJQUNkQyxJQUFJLEVBQUVDO0VBQ1YsQ0FBQztFQUNEQyxJQUFJLEVBQUU7SUFDRkgsUUFBUSxFQUFFLElBQUk7SUFDZEMsSUFBSSxFQUFFQztFQUNWLENBQUM7RUFDREUsSUFBSSxFQUFFO0lBQ0ZDLE9BQU8sRUFBRSxJQUFJO0lBQ2JKLElBQUksRUFBRUM7RUFDVixDQUFDO0VBQ0RJLE9BQU8sRUFBRTtJQUNMTCxJQUFJLEVBQUVDO0VBQ1Y7QUFDSixDQUFDLENBQUM7QUFBQyxlQUVZTCxpQkFBUSxDQUFDVSxLQUFLLENBQUMsT0FBTyxFQUFFWCxXQUFXLENBQUM7QUFBQSJ9","map":{"version":3,"names":["imageSchema","mongoose","Schema","author","required","type","String","uuid","date","require","comment","model"],"sourceRoot":"/home/linux/Desktop/gallery/server/src/models/","sources":["image.ts"],"sourcesContent":["import mongoose from \"mongoose\";\n\nconst imageSchema = new mongoose.Schema({\n    author: {\n        required: true,\n        type: String,\n    },\n    uuid: {\n        required: true,\n        type: String,\n    },\n    date: {\n        require: true,\n        type: String\n    },\n    comment: {\n        type: String\n    }\n});\n\nexport default mongoose.model(\"Image\", imageSchema);\n"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,WAAW,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACpCC,MAAM,EAAE;IACJC,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAEC;EACV,CAAC;EACDC,IAAI,EAAE;IACFH,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAEC;EACV,CAAC;EACDE,IAAI,EAAE;IACFC,OAAO,EAAE,IAAI;IACbJ,IAAI,EAAEC;EACV,CAAC;EACDI,OAAO,EAAE;IACLL,IAAI,EAAEC;EACV;AACJ,CAAC,CAAC;AAAC,eAEYL,iBAAQ,CAACU,KAAK,CAAC,OAAO,EAAEX,WAAW,CAAC;AAAA"}},"mtime":1675797744282}}